(this["webpackJsonpserum-dex-ui"]=this["webpackJsonpserum-dex-ui"]||[]).push([[0],{318:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return v}));var r=n(2),a=n.n(r),o=n(6),i=n(10),c=255,s=224;function u(e,t,n,r){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(a.a.mark((function e(t,n,r,o){var i,u,l,d,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=0,u=0,!(o.length>c)){e.next=15;break}case 3:if(!(o.length-u>c)){e.next=15;break}return l=o.slice(u,u+c),u+=c,console.log("send",(2|i).toString(16),l.length.toString(16),l),e.next=9,t.send(s,n,r,2|i,l);case 9:if(2===e.sent.length){e.next=12;break}throw new Error("Received unexpected reply payload");case 12:i|=1,e.next=3;break;case 15:return d=o.slice(u),console.log("send",i.toString(16),d.length.toString(16),d),e.next=19,t.send(s,n,r,i,d);case 19:return p=e.sent,e.abrupt("return",p.slice(0,p.length-2));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=1<<31>>>0;function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(e|d)>>>0}function b(t,n){var r;r=void 0!==t?void 0!==n?4:3:2;var a=e.alloc(1+4*r),o=0;return o=a.writeUInt8(r,o),o=a.writeUInt32BE(p(44),o),o=a.writeUInt32BE(p(501),o),r>2&&(o=a.writeUInt32BE(p(t),o),4===r&&(o=a.writeUInt32BE(p(n),o))),a}function f(e,t){return h.apply(this,arguments)}function h(){return h=Object(o.a)(a.a.mark((function e(t,n){var r,o,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:b(),o=n.serializeMessage(),e.abrupt("return",j(t,o,r));case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function j(e,t){return m.apply(this,arguments)}function m(){return m=Object(o.a)(a.a.mark((function t(n,r){var o,i,c,s=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:b(),(i=e.alloc(1)).writeUInt8(1,0),c=e.concat([i,o,r]),t.abrupt("return",u(n,6,1,c));case 5:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function v(e){return O.apply(this,arguments)}function O(){return O=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:b(),e.next=3,u(t,5,0,n);case 3:return r=e.sent,e.abrupt("return",new i.PublicKey(r));case 5:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}}).call(this,n(13).Buffer)},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t){},449:function(e,t){},472:function(e,t){},473:function(e,t){},618:function(e,t){},620:function(e,t){},630:function(e,t){},632:function(e,t){},659:function(e,t){},661:function(e,t){},666:function(e,t){},668:function(e,t){},675:function(e,t){},687:function(e,t){},690:function(e,t){},705:function(e,t,n){},714:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getAllCharts",(function(){return fa})),n.d(r,"removeChart",(function(){return ha})),n.d(r,"saveChart",(function(){return ja})),n.d(r,"getChartContent",(function(){return ma})),n.d(r,"getAllStudyTemplates",(function(){return va})),n.d(r,"removeStudyTemplate",(function(){return Oa})),n.d(r,"saveStudyTemplate",(function(){return xa})),n.d(r,"getStudyTemplateContent",(function(){return ga}));var a=n(0),o=n.n(a),i=n(49),c=n.n(i),s=(n(445),n(446),n(2)),u=n.n(s),l=n(6),d=n(8),p=n(27),b=n(10),f=n(34),h=n.n(f);function j(e){if(!e)return!1;try{return new b.PublicKey(e),!0}catch(t){return!1}}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function x(e,t){return t?Math.floor(e*Math.pow(10,t))/Math.pow(10,t):Math.floor(e)}function g(e,t){return t?Math.round(e*Math.pow(10,t))/Math.pow(10,t):e}function y(e){return!isNaN(e)&&Math.floor(e)!==e&&e.toString().includes(".")?e.toString().split(".")[1].length||0:!isNaN(e)&&Math.floor(e)!==e&&e.toString().includes("e")?parseInt(e.toString().split("e-")[1]||"0"):0}function k(e,t){var n=e.div(t).toNumber(),r=e.umod(t),a=r.gcd(t);return n+r.div(a).toNumber()/t.div(a).toNumber()}function w(e){return new h.a(10).pow(new h.a(e))}var S={};function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,r=Object(a.useState)(e+"\n"+n),o=Object(d.a)(r,2),i=o[1];Object(a.useEffect)((function(){return S[e]||(S[e]=[]),S[e].push(i),function(){S[e]=S[e].filter((function(e){return e!==i})),0===S[e].length&&delete S[e]}}),[e]);var c=Object(a.useCallback)((function(t){var r;n!==t&&(null===t?localStorage.removeItem(e):localStorage.setItem(e,t),null===(r=S[e])||void 0===r||r.forEach((function(n){return n(e+"\n"+t)})))}),[n,e]);return[n,c]}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=_(e,JSON.stringify(t)),r=Object(d.a)(n,2),o=r[0],i=r[1];return[Object(a.useMemo)((function(){return o&&JSON.parse(o)}),[o]),function(e){return i(JSON.stringify(e))}]}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toBase58();return n.slice(0,t)+"\u2026"+n.slice(-t)}function T(e,t,n){if(!n&&Object.keys(e).length!==Object.keys(t).length)return!1;n=n||Object.keys(e);var r,a=Object(p.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(e[o]!==t[o])return!1}}catch(i){a.e(i)}finally{a.f()}return!0}var C=n(24),P=n(17),M=n(14),E=n(80),F=n.n(E),B=new Date,N=new Map,K=function e(t,n,r,a,o,i){Object(M.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.refreshInterval=void 0,this.refreshIntervalOnError=void 0,this.callback=void 0,this.cacheNullValues=!0,this.cacheKey=t,this.fn=n,this.refreshInterval=r,this.refreshIntervalOnError=a,this.callback=o,this.cacheNullValues=i},R=function(){function e(t,n,r){var a=this;Object(M.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.timeoutId=void 0,this.listeners=void 0,this.errors=void 0,this.cacheNullValues=!0,this.refresh=Object(l.a)(u.a.mark((function e(){var t,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.timeoutId&&(clearTimeout(a.timeoutId),a.timeoutId=null),!a.stopped){e.next=3;break}return e.abrupt("return");case 3:return t=!1,e.prev=4,e.next=7,a.fn();case 7:if(n=e.sent,a.cacheNullValues||null!==n){e.next=14;break}return console.log("Not caching null value for ".concat(a.cacheKey)),a.errors=0,e.abrupt("return",n);case 14:return N.set(a.cacheKey,n),a.errors=0,a.notifyListeners(),e.abrupt("return",n);case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),++a.errors,console.warn(e.t0),t=!0;case 25:return e.prev=25,a.timeoutId||a.stopped||(r=a.refreshInterval,t&&a.refreshIntervalOnError&&a.refreshIntervalOnError>0&&(r=a.refreshIntervalOnError),a.errors>0&&(r=Math.min(1e3*Math.pow(2,a.errors-1),6e4)),(o=+new Date-+B)<5e3&&(r+=5e3-o/2),"hidden"===document.visibilityState?r=6e4:document.hasFocus()||(r*=1.5),r*=.8+.4*Math.random(),a.timeoutId=setTimeout(a.refresh,r)),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,20,25,28]])}))),this.cacheKey=t,this.fn=n,this.timeoutId=null,this.listeners=new Set,this.errors=0,this.cacheNullValues=r}return Object(P.a)(e,[{key:"refreshInterval",get:function(){return Math.min.apply(Math,Object(C.a)(Object(C.a)(this.listeners).map((function(e){return e.refreshInterval}))))}},{key:"refreshIntervalOnError",get:function(){var e=Object(C.a)(this.listeners).map((function(e){return e.refreshIntervalOnError})).filter((function(e){return null!==e}));return 0===e.length?null:Math.min.apply(Math,Object(C.a)(e))}},{key:"stopped",get:function(){return 0===this.listeners.size}},{key:"addListener",value:function(e){var t=this.refreshInterval;this.listeners.add(e),this.refreshInterval<t&&this.refresh()}},{key:"removeListener",value:function(e){F()(this.listeners.delete(e)),this.stopped&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){return e.callback()}))}}]),e}(),z=new(function(){function e(){Object(M.a)(this,e),this.loops=new Map}return Object(P.a)(e,[{key:"addListener",value:function(e){this.loops.has(e.cacheKey)||this.loops.set(e.cacheKey,new R(e.cacheKey,e.fn,e.cacheNullValues)),this.loops.get(e.cacheKey).addListener(e)}},{key:"removeListener",value:function(e){var t=this.loops.get(e.cacheKey);t.removeListener(e),t.stopped&&(this.loops.delete(e.cacheKey),N.delete(e.cacheKey))}},{key:"refresh",value:function(e){this.loops.has(e)&&this.loops.get(e).refresh()}},{key:"refreshAll",value:function(){return Promise.all(Object(C.a)(this.loops.values()).map((function(e){return e.refresh()})))}}]),e}());function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.refreshInterval,o=void 0===r?6e4:r,i=n.refreshIntervalOnError,c=void 0===i?null:i,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=Object(a.useReducer)((function(e){return e+1}),0),l=Object(d.a)(u,2),p=l[1];if(Object(a.useEffect)((function(){if(!t)return function(){};var n=new K(t,e,o,c,p,s);return z.addListener(n),function(){return z.removeListener(n)}}),[t,o]),!t)return[null,!1];var b=N.has(t),f=b?N.get(t):void 0;return[f,b]}function L(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&N.delete(e);var n=z.loops.get(e);n&&(n.refresh(),t&&n.notifyListeners())}function q(){var e,t=Object(p.a)(z.loops.values());try{for(t.s();!(e=t.n()).done;){e.value.refresh()}}catch(n){t.e(n)}finally{t.f()}}var W=n(58),U=n(1),J=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",custom:!1},{name:"localnet",endpoint:"http://127.0.0.1:8899",custom:!1}],H=new Map,V=o.a.createContext(null);function G(e){var t=e.children,n=I("connectionEndpts",J[0].endpoint),r=Object(d.a)(n,2),o=r[0],i=r[1],c=I("customConnectionEndpoints",[]),s=Object(d.a)(c,2),u=s[0],l=s[1],p=J.concat(u),f=Object(a.useMemo)((function(){return new b.Connection(o,"recent")}),[o]),h=Object(a.useMemo)((function(){return new b.Connection(o,"recent")}),[o]);return Object(a.useEffect)((function(){var e=f.onAccountChange((new b.Account).publicKey,(function(){}));return function(){f.removeAccountChangeListener(e)}}),[f]),Object(a.useEffect)((function(){var e=f.onSlotChange((function(){return null}));return function(){f.removeSlotChangeListener(e)}}),[f]),Object(a.useEffect)((function(){var e=h.onAccountChange((new b.Account).publicKey,(function(){}));return function(){h.removeAccountChangeListener(e)}}),[h]),Object(a.useEffect)((function(){var e=h.onSlotChange((function(){return null}));return function(){h.removeSlotChangeListener(e)}}),[h]),Object(U.jsx)(V.Provider,{value:{endpoint:o,setEndpoint:i,connection:f,sendConnection:h,availableEndpoints:p,setCustomEndpoints:l},children:t})}function Q(){var e=Object(a.useContext)(V);if(!e)throw new Error("Missing connection context");return e.connection}function Y(){var e=Object(a.useContext)(V);if(!e)throw new Error("Missing connection context");return e.sendConnection}function X(){var e=Object(a.useContext)(V);if(!e)throw new Error("Missing connection context");return{endpoint:e.endpoint,endpointInfo:e.availableEndpoints.find((function(t){return t.endpoint===e.endpoint})),setEndpoint:e.setEndpoint,availableEndpoints:e.availableEndpoints,setCustomEndpoints:e.setCustomEndpoints}}function Z(e){var t=Q(),n=Object(W.a)(t,null===e||void 0===e?void 0:e.toBase58()),r=D(Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e?t.getAccountInfo(e):null);case 1:case"end":return n.stop()}}),n)}))),n,{refreshInterval:6e4}),o=Object(d.a)(r,2),i=o[0],c=o[1];Object(a.useEffect)((function(){if(e){if(H.has(n)){++H.get(n).count}else{var r=null,a=t.onAccountChange(e,(function(e){r&&r.data.equals(e.data)&&r.lamports===e.lamports||(r=e,function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).initializeOnly;if(void 0===n||!n||!N.has(e)){N.set(e,t);var r=z.loops.get(e);r&&r.notifyListeners()}}(n,e))}));H.set(n,{count:1,subscriptionId:a})}return function(){var e=H.get(n);e.count-1<=0?(t.removeAccountChangeListener(e.subscriptionId),H.delete(n)):--e.count}}}),[n]);var s=Object(a.useRef)(null);return i&&s.current&&s.current.data.equals(i.data)&&s.current.lamports===i.lamports||(s.current=i),[s.current,c]}function $(e){var t=Z(e),n=Object(d.a)(t,1)[0];return n&&n.data}var ee=n(228),te=n(436),ne=n(16),re=n(136),ae=n(104),oe=["external"],ie=["to","children"];function ce(e){var t=e.external,n=void 0!==t&&t,r=Object(re.a)(e,oe),a=r.to,o=r.children,i=Object(re.a)(r,ie);return n?Object(U.jsx)("a",Object(ne.a)(Object(ne.a)({href:a,target:"_blank",rel:"noopener noreferrer"},i),{},{children:o})):Object(U.jsx)(ae.b,Object(ne.a)(Object(ne.a)({to:a},i),{},{children:o}))}function se(e){var t=e.message,n=e.description,r=e.txid,a=e.type,o=void 0===a?"info":a,i=e.placement,c=void 0===i?"bottomLeft":i;r&&(n=Object(U.jsxs)(ce,{external:!0,to:"https://solscan.io/tx/"+r,style:{color:"#0000ff"},children:["View transaction ",r.slice(0,8),"...",r.slice(r.length-8)]})),te.a[o]({message:Object(U.jsx)("span",{style:{color:"black"},children:t}),description:Object(U.jsx)("span",{style:{color:"black",opacity:.5},children:n}),placement:c,style:{backgroundColor:"white"}})}var ue=n(727),le=n(76),de=n(45),pe=n(46),be=n(69),fe=n.n(be),he=n(415),je=n(318),me=new b.PublicKey("11111111111111111111111111111111"),ve=function(e){Object(de.a)(n,e);var t=Object(pe.a)(n);function n(){var e;return Object(M.a)(this,n),(e=t.call(this))._connecting=void 0,e._publicKey=void 0,e._transport=void 0,e._connecting=!1,e._publicKey=null,e._transport=null,e}return Object(P.a)(n,[{key:"publicKey",get:function(){return this._publicKey||me}},{key:"connected",get:function(){return null!==this._publicKey}},{key:"autoApprove",get:function(){return!1}},{key:"signAllTransactions",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=11;break}return a=t[r],e.next=6,this.signTransaction(a);case 6:o=e.sent,n.push(o);case 8:r++,e.next=2;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._transport&&this._publicKey){e.next=2;break}throw new Error("Not connected to Ledger");case 2:return e.next=4,Object(je.b)(this._transport,t);case 4:return n=e.sent,t.addSignature(this._publicKey,n),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connecting){e.next=2;break}return e.abrupt("return");case 2:return this._connecting=!0,e.prev=3,e.next=6,he.a.create();case 6:return this._transport=e.sent,e.next=9,Object(je.a)(this._transport);case 9:this._publicKey=e.sent,this.emit("connect",this._publicKey),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(3),se({message:"Ledger Error",description:e.t0.message}),e.next=18,this.disconnect();case 18:return e.prev=18,this._connecting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!this._transport){e.next=6;break}return e.next=4,this._transport.close();case 4:this._transport=null,t=!0;case 6:this._connecting=!1,this._publicKey=null,t&&this.emit("disconnect");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fe.a),Oe=n(56),xe=function(e){Object(de.a)(n,e);var t=Object(pe.a)(n);function n(){var e;return Object(M.a)(this,n),(e=t.call(this))._handleConnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["connect"].concat(r))},e._handleDisconnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["disconnect"].concat(r))},e.connect=e.connect.bind(Object(Oe.a)(e)),e}return Object(P.a)(n,[{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isPhantom)return window.solana}},{key:"connected",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.isConnected)||!1}},{key:"autoApprove",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.autoApprove)||!1}},{key:"signAllTransactions",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.publicKey)||me}},{key:"signTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e,t,n;if(!this._provider)return window.open("https://phantom.app/","_blank"),void se({message:"Connection Error",description:"Please install Phantom wallet"});this._provider.listeners("connect").length||(null===(t=this._provider)||void 0===t||t.on("connect",this._handleConnect));this._provider.listeners("disconnect").length||(null===(n=this._provider)||void 0===n||n.on("disconnect",this._handleDisconnect));return null===(e=this._provider)||void 0===e?void 0:e.connect()}},{key:"disconnect",value:function(){this._provider&&this._provider.disconnect()}}]),n}(fe.a);var ge=function(e){Object(de.a)(n,e);var t=Object(pe.a)(n);function n(){var e;return Object(M.a)(this,n),(e=t.call(this))._publicKey=void 0,e._onProcess=void 0,e._connected=void 0,e._onProcess=!1,e._connected=!1,e.connect=e.connect.bind(Object(Oe.a)(e)),e}return Object(P.a)(n,[{key:"connected",get:function(){return this._connected}},{key:"autoApprove",get:function(){return!1}},{key:"signAllTransactions",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isMathWallet)return window.solana}},{key:"publicKey",get:function(){return this._publicKey||me}},{key:"signTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;if(!this._onProcess){if(!this._provider)return window.open("https://mathwallet.org/","_blank"),void se({message:"Math Wallet Error",description:"Please install mathwallet"});this._onProcess=!0,this._provider.getAccount().then((function(t){e._publicKey=new b.PublicKey(t),e._connected=!0,e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))}}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=void 0,this._connected=!1,this.emit("disconnect"))}}]),n}(fe.a),ye=function(e){Object(de.a)(n,e);var t=Object(pe.a)(n);function n(){var e;return Object(M.a)(this,n),(e=t.call(this))._handleConnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["connect"].concat(r))},e._handleDisconnect=function(){var t,n,r;null===(t=e._provider)||void 0===t||t.off("connect",e._handleConnect),null===(n=e._provider)||void 0===n||n.off("disconnect",e._handleDisconnect);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];(r=e).emit.apply(r,["disconnect"].concat(o))},e.connect=e.connect.bind(Object(Oe.a)(e)),e}return Object(P.a)(n,[{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solflare)||void 0===t?void 0:t.isSolflare)return window.solflare}},{key:"connected",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.isConnected)||!1}},{key:"autoApprove",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.autoApprove)||!1}},{key:"signAllTransactions",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.publicKey)||me}},{key:"signTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=4;break}return window.open("https://solflare.com/","_blank"),se({message:"Connection Error",description:"Please install Solflare extension"}),e.abrupt("return");case 4:return null===(t=this._provider)||void 0===t||t.on("connect",this._handleConnect),null===(n=this._provider)||void 0===n||n.on("disconnect",this._handleDisconnect),e.abrupt("return",null===(r=this._provider)||void 0===r?void 0:r.connect());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._provider&&this._provider.disconnect();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fe.a),ke="https://cdn.jsdelivr.net/gh/solana-labs/oyster@main/assets/wallets",we=[{name:"sollet.io",url:"https://www.sollet.io",icon:"".concat(ke,"/sollet.svg")},{name:"Sollet Extension",url:"https://www.sollet.io/extension",icon:"".concat(ke,"/sollet.svg"),adapter:function(e,t){var n=window.sollet;return n?new ee.a(n,t):{on:function(){},connect:function(){se({message:"Sollet Extension Error",description:"Please install the Sollet Extension for Chrome"})}}}},{name:"Ledger",url:"https://www.ledger.com",icon:"".concat(ke,"/ledger.svg"),adapter:ve},{name:"Solflare",url:"https://solflare.com/access-wallet",icon:"".concat(ke,"/solflare.svg")},{name:"Solflare Extension",url:"https://solflare.com",icon:"".concat(ke,"/solflare.svg"),adapter:ye},{name:"Phantom",url:"https://www.phantom.app",icon:"https://www.phantom.app/img/logo.png",adapter:xe},{name:"MathWallet",url:"https://www.mathwallet.org",icon:"".concat(ke,"/mathwallet.svg"),adapter:ge}],Se=o.a.createContext(null);function _e(e){var t,n,r=e.children,o=X().endpoint,i=Object(a.useState)(!1),c=Object(d.a)(i,2),s=c[0],u=c[1],l=I("walletProvider"),p=Object(d.a)(l,2),b=p[0],f=p[1],h=Object(a.useMemo)((function(){return we.find((function(e){return e.url===b}))}),[b]),j=Object(a.useState)(void 0),m=Object(d.a)(j,2),v=m[0],O=m[1];Object(a.useEffect)((function(){if(h){var e=function(){v=new(h.adapter||ee.a)(b,o),O(v)};if("complete"!==document.readyState){var t=function t(){e(),window.removeEventListener("load",t)};return window.addEventListener("load",t),function(){return window.removeEventListener("load",t)}}e()}}),[h,b,o]);var x=Object(a.useState)(!1),g=Object(d.a)(x,2),y=g[0],k=g[1];Object(a.useEffect)((function(){return v&&(v.on("connect",(function(){var e;if(null===(e=v)||void 0===e?void 0:e.publicKey){console.log("connected"),localStorage.removeItem("feeDiscountKey"),k(!0);var t=v.publicKey.toBase58();se({message:"Wallet update",description:"Connected to wallet "+(t.length>20?"".concat(t.substring(0,7),".....").concat(t.substring(t.length-7,t.length)):t)})}})),v.on("disconnect",(function(){k(!1),se({message:"Wallet update",description:"Disconnected from wallet"}),localStorage.removeItem("feeDiscountKey")}))),function(){k(!1),v&&v.connected&&(v.disconnect(),k(!1))}}),[v]),Object(a.useEffect)((function(){return v&&s&&(v.connect(),u(!1)),function(){}}),[v,s]);var w=Object(a.useState)(!1),S=Object(d.a)(w,2),_=S[0],A=S[1],T=Object(a.useCallback)((function(){return A(!0)}),[]),C=Object(a.useCallback)((function(){return A(!1)}),[]);return Object(U.jsxs)(Se.Provider,{value:{wallet:v,connected:y,select:T,providerUrl:b,setProviderUrl:f,providerName:null!==(t=null===(n=we.find((function(e){return e.url===b})))||void 0===n?void 0:n.name)&&void 0!==t?t:b},children:[r,Object(U.jsx)(ue.a,{title:"Select Wallet",okText:"Connect",visible:_,okButtonProps:{style:{display:"none"}},onCancel:C,width:400,children:we.map((function(e){return Object(U.jsx)(le.a,{size:"large",type:b===e.url?"primary":"ghost",onClick:function(){f(e.url),u(!0),C()},icon:Object(U.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:8}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8},children:e.name})}))})]})}function Ie(){var e=Object(a.useContext)(Se);if(!e)throw new Error("Missing wallet context");var t=e.wallet;return{connected:e.connected,wallet:t,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName,select:e.select,connect:function(){t?t.connect():e.select()},disconnect:function(){null===t||void 0===t||t.disconnect()}}}var Ae,Te=n(37),Ce=n(38),Pe=Object(Ce.a)(Ae||(Ae=Object(Te.a)(["\nhtml,body{\n  background: #11161D;\n}\ninput[type=number]::-webkit-inner-spin-button {\n  opacity: 0;\n}\ninput[type=number]:hover::-webkit-inner-spin-button,\ninput[type=number]:focus::-webkit-inner-spin-button {\n  opacity: 0.25;\n}\n/* width */\n::-webkit-scrollbar {\n  width: 15px;\n}\n/* Track */\n::-webkit-scrollbar-track {\n  background: #2d313c;\n}\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: #5b5f67;\n}\n/* Handle on hover */\n::-webkit-scrollbar-thumb:hover {\n  background: #5b5f67;\n}\n.ant-slider-track, .ant-slider:hover .ant-slider-track {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-track,\n.ant-slider ant-slider-track:hover {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-dot-active,\n.ant-slider-handle,\n.ant-slider-handle-click-focused,\n.ant-slider:hover .ant-slider-handle:not(.ant-tooltip-open)  {\n  border: 2px solid #2abdd2; \n}\n.ant-table-tbody > tr.ant-table-row:hover > td {\n  background: #273043;\n}\n.ant-table-tbody > tr > td {\n  border-bottom: 8px solid #1A2029;\n}\n.ant-table-container table > thead > tr:first-child th {\n  border-bottom: none;\n}\n.ant-divider-horizontal.ant-divider-with-text::before, .ant-divider-horizontal.ant-divider-with-text::after {\n  border-top: 1px solid #434a59 !important;\n}\n.ant-layout {\n    background: #11161D\n  }\n  .ant-table {\n    background: #212734;\n  }\n  .ant-table-thead > tr > th {\n    background: #1A2029;\n  }\n.ant-select-item-option-content {\n  img {\n    margin-right: 4px;\n  }\n}\n.ant-modal-content {\n  background-color: #212734;\n}\n\n@-webkit-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-moz-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n.flash {\n  -moz-animation: highlight 0.5s ease 0s 1 alternate ;\n  -webkit-animation: highlight 0.5s ease 0s 1 alternate;\n  animation: highlight 0.5s ease 0s 1 alternate;\n}"]))),Me=n(425),Ee=n(725),Fe=Ee.a.Title,Be=function(e){Object(de.a)(n,e);var t=Object(pe.a)(n);function n(){var e;Object(M.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(P.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(U.jsx)("div",{children:Object(U.jsxs)("div",{children:[Object(U.jsx)(Fe,{level:2,children:"Something went wrong."}),Object(U.jsx)(Fe,{level:4,children:"Please try again later."})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.Component),Ne=n(54),Ke=n(120),Re=n(716),ze=n(717),De=n(437),Le=n(25),qe=n(50),We=n(78),Ue=n(121),Je=n(13),He=n(124);function Ve(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(l.a)(u.a.mark((function e(t){var n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.connection,n=t.wallet,r=t.mintPublicKey,e.next=3,Ue.c.getAssociatedTokenAddress(Ue.a,Ue.b,r,n.publicKey);case 3:return a=e.sent,(o=new b.Transaction).add(Ue.c.createAssociatedTokenAccountInstruction(Ue.a,Ue.b,r,a,n.publicKey,n.publicKey)),e.abrupt("return",{transaction:o,newAccountPubkey:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i,c,s,l,d,p,b,f,h,j,m,v,O,x,g,y,k,w,S,_;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.market,r=t.openOrders,a=t.connection,o=t.wallet,i=t.baseCurrencyAccount,c=t.quoteCurrencyAccount,s=t.sendNotification,l=void 0===s||s,d=t.usdcRef,p=void 0===d?void 0:d,b=t.usdtRef,f=void 0===b?void 0:b,n&&o&&a&&r&&(i||c)){e.next=4;break}return l&&se({message:"Not connected"}),e.abrupt("return");case 4:if(j=null===i||void 0===i?void 0:i.pubkey,m=null===c||void 0===c?void 0:c.pubkey,j){e.next=12;break}return e.next=9,Ve({connection:a,wallet:o,mintPublicKey:n.baseMintAddress});case 9:v=e.sent,j=null===v||void 0===v?void 0:v.newAccountPubkey,h=null===v||void 0===v?void 0:v.transaction;case 12:if(m){e.next=18;break}return e.next=15,Ve({connection:a,wallet:o,mintPublicKey:n.quoteMintAddress});case 15:O=e.sent,m=null===O||void 0===O?void 0:O.newAccountPubkey,h=null===O||void 0===O?void 0:O.transaction;case 18:return x=null,n.supportsReferralFees&&(g=Le.TOKEN_MINTS.find((function(e){return"USDT"===e.name})),y=Le.TOKEN_MINTS.find((function(e){return"USDC"===e.name})),f&&g&&n.quoteMintAddress.equals(g.address)?x=f:p&&y&&n.quoteMintAddress.equals(y.address)&&(x=p)),e.next=22,n.makeSettleFundsTransaction(a,r,j,m,x);case 22:return k=e.sent,w=k.transaction,S=k.signers,_=Ot([h,w]),e.next=28,ut({transaction:_,signers:S,wallet:o,connection:a,sendingMessage:"Settling funds...",sendNotification:l});case 28:return e.abrupt("return",e.sent);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i,c,s,d,p,b,f,h,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.connection,r=t.wallet,a=t.tokenAccounts,o=t.markets,i=t.selectedTokenAccounts,o&&r&&n&&a){e.next=3;break}return e.abrupt("return");case 3:return c=[],o.reduce((function(e,t){return e.push(t._programId),e}),[]).forEach((function(e){c.find((function(t){return t.equals(e)}))||c.push(e)})),s=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.OpenOrders.findForOwner(n,r.publicKey,t);case 2:return a=e.sent,e.abrupt("return",a.filter((function(e){return e.baseTokenFree.toNumber()||e.quoteTokenFree.toNumber()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(c.map((function(e){return s(e)})));case 8:return d=e.sent,p=d.reduce((function(e,t){return e.concat(t)}),[]),e.next=12,Promise.all(p.map((function(e){var t,r,c=o.find((function(t){var n,r;return null===(n=t._decoded)||void 0===n||null===(r=n.ownAddress)||void 0===r?void 0:r.equals(e.market)}));if(e.baseTokenFree.isZero()&&e.quoteTokenFree.isZero())return null;var s=null===c||void 0===c?void 0:c.baseMintAddress,u=null===c||void 0===c?void 0:c.quoteMintAddress,l=null===(t=cn(a,s,s&&i&&i[s.toBase58()]))||void 0===t?void 0:t.pubkey,d=null===(r=cn(a,u,u&&i&&i[u.toBase58()]))||void 0===r?void 0:r.pubkey;return l&&d?c&&c.makeSettleFundsTransaction(n,e,l,d):null})));case 12:if((b=e.sent.filter((function(e){return!!e})))&&0!==b.length){e.next=15;break}return e.abrupt("return");case 15:return f=b.slice(0,4).map((function(e){return e.transaction})),h=[],b.reduce((function(e,t){return e.concat(t.signers)}),[]).forEach((function(e){h.find((function(t){return t.publicKey.equals(e.publicKey)}))||h.push(e)})),j=Ot(f),e.next=21,ut({transaction:j,signers:h,wallet:r,connection:n});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}function $e(e){return et.apply(this,arguments)}function et(){return(et=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tt(Object(ne.a)(Object(ne.a)({},t),{},{orders:[t.order]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.market,r=t.wallet,a=t.connection,o=t.orders,i=n.makeMatchOrdersTransaction(5),o.forEach((function(e){i.add(n.makeCancelOrderInstruction(a,r.publicKey,e))})),i.add(n.makeMatchOrdersTransaction(5)),e.next=6,ut({transaction:i,wallet:r,connection:a,sendingMessage:"Sending cancel..."});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return at.apply(this,arguments)}function at(){return(at=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i,c,s,l,d,p,f,h,j,m,v,O,x,g,k,w,S,_,I,A,T,P,M,E,F,B,N,K,R;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.side,o=t.price,i=t.size,c=t.orderType,s=t.market,l=t.connection,d=t.wallet,p=t.baseCurrencyAccount,f=t.quoteCurrencyAccount,h=t.feeDiscountPubkey,j=void 0===h?void 0:h,m=(null===s||void 0===s||null===(n=s.minOrderSize)||void 0===n?void 0:n.toFixed(y(s.minOrderSize)))||(null===s||void 0===s?void 0:s.minOrderSize),v=(null===s||void 0===s||null===(r=s.tickSize)||void 0===r?void 0:r.toFixed(y(s.tickSize)))||(null===s||void 0===s?void 0:s.tickSize),O=function(e,t){return Math.abs(e/t%1)<1e-5||Math.abs(e/t%1-1)<1e-5},!isNaN(o)){e.next=7;break}return se({message:"Invalid price",type:"error"}),e.abrupt("return");case 7:if(!isNaN(i)){e.next=10;break}return se({message:"Invalid size",type:"error"}),e.abrupt("return");case 10:if(d&&d.publicKey){e.next=13;break}return se({message:"Connect wallet",type:"error"}),e.abrupt("return");case 13:if(s){e.next=16;break}return se({message:"Invalid  market",type:"error"}),e.abrupt("return");case 16:if(O(i,s.minOrderSize)){e.next=19;break}return se({message:"Size must be an increment of ".concat(m),type:"error"}),e.abrupt("return");case 19:if(!(i<s.minOrderSize)){e.next=22;break}return se({message:"Size too small",type:"error"}),e.abrupt("return");case 22:if(O(o,s.tickSize)){e.next=25;break}return se({message:"Price must be an increment of ".concat(v),type:"error"}),e.abrupt("return");case 25:if(!(o<s.tickSize)){e.next=28;break}return se({message:"Price under tick size",type:"error"}),e.abrupt("return");case 28:if(x=d.publicKey,g=new b.Transaction,k=[],p){e.next=39;break}return e.next=34,Ve({connection:l,wallet:d,mintPublicKey:s.baseMintAddress});case 34:w=e.sent,S=w.transaction,_=w.newAccountPubkey,g.add(S),p=_;case 39:if(f){e.next=47;break}return e.next=42,Ve({connection:l,wallet:d,mintPublicKey:s.quoteMintAddress});case 42:I=e.sent,A=I.transaction,T=I.newAccountPubkey,g.add(A),f=T;case 47:if(P="sell"===a?p:f){e.next=51;break}return se({message:"Need an SPL token account for cost currency",type:"error"}),e.abrupt("return");case 51:return M={owner:x,payer:P,side:a,price:o,size:i,orderType:c,feeDiscountPubkey:j||null},console.log(M),E=s.makeMatchOrdersTransaction(5),g.add(E),F=ct(),e.next=58,s.makePlaceOrderTransaction(l,M,12e4,12e4);case 58:return B=e.sent,N=B.transaction,K=B.signers,R=ct(),console.log("Creating order transaction took ".concat(R-F)),g.add(N),g.add(s.makeMatchOrdersTransaction(5)),k.push.apply(k,Object(C.a)(K)),e.next=68,ut({transaction:g,wallet:d,connection:l,signers:k,sendingMessage:"Sending order..."});case 68:return e.abrupt("return",e.sent);case 69:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return it.apply(this,arguments)}function it(){return it=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i,c,s,f,j,m,v,O,x,g,y,k,w,S,_,I,A,T,C,P,M,E,F,B;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S=function(){return(S=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new h.a(0);case 1:return e.prev=2,e.next=5,b.PublicKey.createProgramAddress([f.publicKey.toBuffer(),t.toArrayLike(Je.Buffer,"le",8)],s);case 5:return n=e.sent,e.abrupt("return",[n,t]);case 9:e.prev=9,e.t0=e.catch(2),t.iaddn(1);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)},w=function(){return S.apply(this,arguments)},n=t.connection,r=t.wallet,a=t.baseMint,o=t.quoteMint,i=t.baseLotSize,c=t.quoteLotSize,s=t.dexProgramId,f=new b.Account,j=new b.Account,m=new b.Account,v=new b.Account,O=new b.Account,x=new b.Account,g=new b.Account,y=0,k=new h.a(100),e.next=14,w();case 14:return _=e.sent,I=Object(d.a)(_,2),A=I[0],T=I[1],C=new b.Transaction,e.t0=C,e.t1=b.SystemProgram,e.t2=r.publicKey,e.t3=x.publicKey,e.next=25,n.getMinimumBalanceForRentExemption(165);case 25:return e.t4=e.sent,e.t5=Le.TokenInstructions.TOKEN_PROGRAM_ID,e.t6={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:165,programId:e.t5},e.t7=e.t1.createAccount.call(e.t1,e.t6),e.t8=b.SystemProgram,e.t9=r.publicKey,e.t10=g.publicKey,e.next=34,n.getMinimumBalanceForRentExemption(165);case 34:return e.t11=e.sent,e.t12=Le.TokenInstructions.TOKEN_PROGRAM_ID,e.t13={fromPubkey:e.t9,newAccountPubkey:e.t10,lamports:e.t11,space:165,programId:e.t12},e.t14=e.t8.createAccount.call(e.t8,e.t13),e.t15=Le.TokenInstructions.initializeAccount({account:x.publicKey,mint:a,owner:A}),e.t16=Le.TokenInstructions.initializeAccount({account:g.publicKey,mint:o,owner:A}),e.t0.add.call(e.t0,e.t7,e.t14,e.t15,e.t16),P=new b.Transaction,e.t17=P,e.t18=b.SystemProgram,e.t19=r.publicKey,e.t20=f.publicKey,e.next=48,n.getMinimumBalanceForRentExemption(Le.Market.getLayout(s).span);case 48:return e.t21=e.sent,e.t22=Le.Market.getLayout(s).span,e.t23=s,e.t24={fromPubkey:e.t19,newAccountPubkey:e.t20,lamports:e.t21,space:e.t22,programId:e.t23},e.t25=e.t18.createAccount.call(e.t18,e.t24),e.t26=b.SystemProgram,e.t27=r.publicKey,e.t28=j.publicKey,e.next=58,n.getMinimumBalanceForRentExemption(5132);case 58:return e.t29=e.sent,e.t30=5132,e.t31=s,e.t32={fromPubkey:e.t27,newAccountPubkey:e.t28,lamports:e.t29,space:e.t30,programId:e.t31},e.t33=e.t26.createAccount.call(e.t26,e.t32),e.t34=b.SystemProgram,e.t35=r.publicKey,e.t36=m.publicKey,e.next=68,n.getMinimumBalanceForRentExemption(262156);case 68:return e.t37=e.sent,e.t38=262156,e.t39=s,e.t40={fromPubkey:e.t35,newAccountPubkey:e.t36,lamports:e.t37,space:e.t38,programId:e.t39},e.t41=e.t34.createAccount.call(e.t34,e.t40),e.t42=b.SystemProgram,e.t43=r.publicKey,e.t44=v.publicKey,e.next=78,n.getMinimumBalanceForRentExemption(65548);case 78:return e.t45=e.sent,e.t46=65548,e.t47=s,e.t48={fromPubkey:e.t43,newAccountPubkey:e.t44,lamports:e.t45,space:e.t46,programId:e.t47},e.t49=e.t42.createAccount.call(e.t42,e.t48),e.t50=b.SystemProgram,e.t51=r.publicKey,e.t52=O.publicKey,e.next=88,n.getMinimumBalanceForRentExemption(65548);case 88:return e.t53=e.sent,e.t54=65548,e.t55=s,e.t56={fromPubkey:e.t51,newAccountPubkey:e.t52,lamports:e.t53,space:e.t54,programId:e.t55},e.t57=e.t50.createAccount.call(e.t50,e.t56),e.t58=Le.DexInstructions.initializeMarket({market:f.publicKey,requestQueue:j.publicKey,eventQueue:m.publicKey,bids:v.publicKey,asks:O.publicKey,baseVault:x.publicKey,quoteVault:g.publicKey,baseMint:a,quoteMint:o,baseLotSize:new h.a(i),quoteLotSize:new h.a(c),feeRateBps:y,vaultSignerNonce:T,quoteDustThreshold:k,programId:s,authority:void 0}),e.t17.add.call(e.t17,e.t25,e.t33,e.t41,e.t49,e.t57,e.t58),e.next=97,bt({transactionsAndSigners:[{transaction:C,signers:[x,g]},{transaction:P,signers:[f,j,m,v,O]}],wallet:r,connection:n});case 97:M=e.sent,E=Object(p.a)(M),e.prev=99,E.s();case 101:if((F=E.n()).done){e.next=107;break}return B=F.value,e.next=105,ht({signedTransaction:B,connection:n});case 105:e.next=101;break;case 107:e.next=112;break;case 109:e.prev=109,e.t59=e.catch(99),E.e(e.t59);case 112:return e.prev=112,E.f(),e.finish(112);case 115:return e.abrupt("return",f.publicKey);case 116:case"end":return e.stop()}}),e,null,[[99,109,112,115]])}))),it.apply(this,arguments)}var ct=function(){return(new Date).getTime()/1e3},st=15e3;function ut(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i,c,s,l,d,p,b,f,h,j,m,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,o=void 0===a?[]:a,i=t.connection,c=t.sendingMessage,s=void 0===c?"Sending transaction...":c,l=t.sentMessage,d=void 0===l?"Transaction sent":l,p=t.successMessage,b=void 0===p?"Transaction confirmed":p,f=t.timeout,h=void 0===f?st:f,j=t.sendNotification,m=void 0===j||j,e.next=3,dt({transaction:n,wallet:r,signers:o,connection:i});case 3:return v=e.sent,e.next=6,ht({signedTransaction:v,connection:i,sendingMessage:s,sentMessage:d,successMessage:b,timeout:h,sendNotification:m});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,o=void 0===a?[]:a,i=t.connection,e.next=3,i.getRecentBlockhash("max");case 3:return n.recentBlockhash=e.sent.blockhash,n.setSigners.apply(n,[r.publicKey].concat(Object(C.a)(o.map((function(e){return e.publicKey}))))),o.length>0&&n.partialSign.apply(n,Object(C.a)(o)),e.next=8,r.signTransaction(n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(l.a)(u.a.mark((function e(t){var n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transactionsAndSigners,r=t.wallet,a=t.connection,e.next=3,a.getRecentBlockhash("max");case 3:return o=e.sent.blockhash,n.forEach((function(e){var t=e.transaction,n=e.signers,a=void 0===n?[]:n;t.recentBlockhash=o,t.setSigners.apply(t,[r.publicKey].concat(Object(C.a)(a.map((function(e){return e.publicKey}))))),(null===a||void 0===a?void 0:a.length)>0&&t.partialSign.apply(t,Object(C.a)(a))})),e.next=7,r.signAllTransactions(n.map((function(e){return e.transaction})));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,i,c,s,d,p,b,f,h,j,v,O,x,g,y,k,w,S;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.sendingMessage,o=void 0===a?"Sending transaction...":a,i=t.sentMessage,c=void 0===i?"Transaction sent":i,s=t.successMessage,d=void 0===s?"Transaction confirmed":s,p=t.timeout,b=void 0===p?st:p,f=t.sendNotification,h=void 0===f||f,j=n.serialize(),v=ct(),h&&se({message:o}),e.next=6,r.sendRawTransaction(j,{skipPreflight:!0});case 6:return O=e.sent,h&&se({message:c,type:"success",txid:O}),console.log("Started awaiting confirmation for",O),x=!1,Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x||!(ct()-v<b)){e.next=6;break}return r.sendRawTransaction(j,{skipPreflight:!0}),e.next=4,m(300);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=11,e.next=14,mt(O,b,r);case 14:e.next=42;break;case 16:if(e.prev=16,e.t0=e.catch(11),!e.t0.timeout){e.next=20;break}throw new Error("Timed out awaiting confirmation on transaction");case 20:return g=null,e.prev=21,e.next=24,St(r,n,"single");case 24:g=e.sent.value,e.next=29;break;case 27:e.prev=27,e.t1=e.catch(21);case 29:if(!g||!g.err){e.next=41;break}if(!g.logs){e.next=39;break}y=g.logs.length-1;case 32:if(!(y>=0)){e.next=39;break}if(!(k=g.logs[y]).startsWith("Program log: ")){e.next=36;break}throw new Error("Transaction failed: "+k.slice("Program log: ".length));case 36:--y,e.next=32;break;case 39:throw"object"==typeof g.err&&"InstructionError"in g.err?(S=Object(Le.parseInstructionErrorResponse)(n,g.err.InstructionError),w=S.error):w=JSON.stringify(g.err),new Error(w);case 41:throw new Error("Transaction failed");case 42:return e.prev=42,x=!0,e.finish(42);case 45:return h&&se({message:d,type:"success",txid:O}),console.log("Latency",O,ct()-v),e.abrupt("return",O);case 48:case"end":return e.stop()}}),e,null,[[11,16,42,45],[21,27]])})))).apply(this,arguments)}function mt(e,t,n){return vt.apply(this,arguments)}function vt(){return(vt=Object(l.a)(u.a.mark((function e(t,n,r){var a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,new Promise((function(e,o){Object(l.a)(u.a.mark((function i(){return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:setTimeout((function(){a||(a=!0,console.log("Timed out for txid",t),o({timeout:!0}))}),n);try{r.onSignature(t,(function(n){console.log("WS confirmed",t,n),a=!0,n.err?o(n.err):e(n)}),"recent"),console.log("Set up WS connection",t)}catch(c){a=!0,console.log("WS error in setup",t,c)}case 2:if(a){i.next=8;break}return Object(l.a)(u.a.mark((function n(){var i,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.getSignatureStatuses([t]);case 3:i=n.sent,c=i&&i.value[0],a||(c?c.err?(console.log("REST error for",t,c),a=!0,o(c.err)):c.confirmations?(console.log("REST confirmation for",t,c),a=!0,e(c)):console.log("REST no confirmations for",t,c):console.log("REST null result for",t,c)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a||console.log("REST connection error: txid",t,n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))(),i.next=6,m(300);case 6:i.next=2;break;case 8:case"end":return i.stop()}}),i)})))()}));case 3:return o=e.sent,a=!0,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e){var t=new b.Transaction;return e.filter((function(e){return void 0!==e})).forEach((function(e){t.add(e)})),t}var xt,gt=Object(He.a)({executable:"boolean",owner:"string",lamports:"number",data:"any",rentEpoch:"number?"}),yt=(xt=He.a.array([He.a.union(["null",gt])]),function(e){var t=He.a.literal("2.0");return He.a.union([Object(He.a)({jsonrpc:t,id:"string",error:"any"}),Object(He.a)({jsonrpc:t,id:"string",error:"null?",result:e})])}({context:Object(He.a)({slot:"number"}),value:xt}));function kt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=Object(l.a)(u.a.mark((function e(t,n){var r,a,o,i,c,s,l,d,f,h,j,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[n.map((function(e){return e.toBase58()})),{commitment:"recent"}],e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(a=e.sent,!(o=yt(a)).error){e.next=7;break}throw new Error("failed to get info about accounts "+n.map((function(e){return e.toBase58()})).join(", ")+": "+o.error.message);case 7:F()("undefined"!==typeof o.result),i=[],c=Object(p.a)(o.result.value);try{for(c.s();!(s=c.n()).done;)l=s.value,d=null,o.result.value&&(f=l.executable,h=l.owner,j=l.lamports,m=l.data,F()("base64"===m[1]),d={executable:f,owner:new b.PublicKey(h),lamports:j,data:Je.Buffer.from(m[0],"base64")}),i.push(d)}catch(u){c.e(u)}finally{c.f()}return e.abrupt("return",{context:{slot:o.result.context.slot},value:Object.fromEntries(i.map((function(e,t){return[n[t].toBase58(),e]})))});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e,t,n){return _t.apply(this,arguments)}function _t(){return(_t=Object(l.a)(u.a.mark((function e(t,n,r){var a,o,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),o=n._serialize(a),i=o.toString("base64"),c=[i,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",c);case 10:if(!(s=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+s.error.message);case 13:return e.abrupt("return",s.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var It=qe.struct([qe.blob(32,"mint"),qe.blob(32,"owner"),qe.nu64("amount"),qe.blob(93)]),At=qe.struct([qe.blob(36),qe.blob(8,"supply"),qe.u8("decimals"),qe.u8("initialized"),qe.blob(36)]);function Tt(e){var t=It.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new b.PublicKey(n),owner:new b.PublicKey(r),amount:a}}function Ct(e){var t=At.decode(e),n=t.decimals,r=t.initialized,a=t.supply;return{decimals:n,initialized:!!r,supply:new h.a(a,10,"le")}}function Pt(e){return[{memcmp:{offset:It.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:It.span}]}var Mt=new b.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function Et(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pt(n),e.next=3,t.getProgramAccounts(Mt,{filters:r});case 3:return a=e.sent,e.abrupt("return",a.map((function(e){var t=e.pubkey,n=e.account,r=n.data,a=n.executable,o=n.owner,i=n.lamports;return{publicKey:new b.PublicKey(t),accountInfo:{data:r,executable:a,owner:new b.PublicKey(o),lamports:i}}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(l.a)(u.a.mark((function e(t,n){var r,a,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Et(t,n),t.getAccountInfo(n)]);case 2:return r=e.sent,a=Object(d.a)(r,2),o=a[0],i=a[1],c=o.map((function(e){var t=e.publicKey,n=e.accountInfo;return{pubkey:t,account:n,effectiveMint:Tt(n.data).mint}})),e.abrupt("return",c.concat({pubkey:n,account:i,effectiveMint:We.WRAPPED_SOL_MINT}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(){var e=Gt().customMarkets;return Object(a.useMemo)((function(){return Object.fromEntries(Le.TOKEN_MINTS.map((function(e){return[e.address.toBase58(),e.name]})))}),[e.length])}function Rt(){var e=Q(),t=on(),n=Object(d.a)(t,1)[0],r=Lt(),a=Object(d.a)(r,1)[0],o=(n||[]).map((function(e){return e.effectiveMint})).concat((a||[]).map((function(e){return e.market.baseMintAddress}))).concat((a||[]).map((function(e){return e.market.quoteMintAddress}))),i=Object(C.a)(new Set(o.map((function(e){return e.toBase58()})))).map((function(e){return new b.PublicKey(e)})),c=function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt(e,i);case 2:return n=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(n.value).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,r&&Ct(r.data)]}))));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return D(c,Object(W.a)("getAllMintInfo",e,(n||[]).length,(a||[]).length),{refreshInterval:5e6})}var zt=function(){function e(){Object(M.a)(this,e)}return Object(P.a)(e,null,[{key:"get",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.URL+t);case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.success?r.data:null);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error fetching from Bonfida API ".concat(t,": ").concat(e.t0));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentTrades",value:function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("trades/address/".concat(n)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();zt.URL="https://serum-api.bonfida.com/";var Dt=Le.MARKETS;function Lt(){var e=Q(),t=Gt().customMarkets,n=function(){var n=Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(vn(t).map(function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Le.Market.load(e,n.address,{},n.programId);case 3:return r=t.sent,t.abrupt("return",{market:r,marketName:n.name,programId:n.programId});case 7:return t.prev=7,t.t0=t.catch(0),se({message:"Error loading all market",description:t.t0.message,type:"error"}),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));case 2:return r=n.sent,n.abrupt("return",r.filter((function(e){return!!e})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return D(n,Object(W.a)("getAllMarkets",t.length,e),{refreshInterval:Ut})}function qt(){var e,t=Q(),n=Ie().wallet;function r(){return(r=Object(l.a)(u.a.mark((function e(){var r,a,o,i,c,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&n.publicKey){e.next=2;break}return e.abrupt("return",[]);case 2:console.log("refreshing useUnmigratedOpenOrdersAccounts"),r=[],a=Array.from(new Set(Dt.filter((function(e){return e.deprecated})).map((function(e){return e.programId.toBase58()})))).map((function(e){return new b.PublicKey(e)})),i=Object(p.a)(a),e.prev=6,i.s();case 8:if((c=i.n()).done){e.next=22;break}return o=c.value,e.prev=10,e.next=13,Le.OpenOrders.findForOwner(t,n.publicKey,o);case 13:s=e.sent,r=r.concat(s.filter((function(e){return e.baseTokenTotal.toNumber()||e.quoteTokenTotal.toNumber()})).filter((function(e){return Dt.some((function(t){return t.deprecated&&t.address.equals(e.market)}))}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log("Error loading deprecated markets",null===(l=o)||void 0===l?void 0:l.toBase58(),e.t0.message);case 20:e.next=8;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(6),i.e(e.t1);case 27:return e.prev=27,i.f(),e.finish(27);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[6,24,27,30],[10,17]])})))).apply(this,arguments)}var a=Object(W.a)("getUnmigratedOpenOrdersAccounts",t,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58()),o=D((function(){return r.apply(this,arguments)}),a,{refreshInterval:Ut});return{accounts:Object(d.a)(o,1)[0],refresh:function(e){return L(a,e)}}}var Wt=o.a.createContext(null),Ut=5e6,Jt=5e3,Ht=Dt.find((function(e){var t=e.name,n=e.deprecated;return"SRM/USDT"===t&&!n}));function Vt(e,t){var n,r;if(!e)return{};var a=vn(t).find((function(t){return t.address.equals(e.address)})),o=(null===e||void 0===e?void 0:e.baseMintAddress)&&(null===(n=Le.TOKEN_MINTS.find((function(t){return t.address.equals(e.baseMintAddress)})))||void 0===n?void 0:n.name)||(null===a||void 0===a?void 0:a.baseLabel)&&"".concat(null===a||void 0===a?void 0:a.baseLabel,"*")||"UNKNOWN",i=(null===e||void 0===e?void 0:e.quoteMintAddress)&&(null===(r=Le.TOKEN_MINTS.find((function(t){return t.address.equals(e.quoteMintAddress)})))||void 0===r?void 0:r.name)||(null===a||void 0===a?void 0:a.quoteLabel)&&"".concat(null===a||void 0===a?void 0:a.quoteLabel,"*")||"UNKNOWN";return Object(ne.a)(Object(ne.a)({},a),{},{marketName:null===a||void 0===a?void 0:a.name,baseCurrency:o,quoteCurrency:i,marketInfo:a})}function Gt(){var e=I("customMarkets",[]),t=Object(d.a)(e,2);return{customMarkets:t[0],setCustomMarkets:t[1]}}function Qt(e){var t=e.marketAddress,n=e.setMarketAddress,r=e.children,o=Gt(),i=o.customMarkets,c=o.setCustomMarkets,s=t&&new b.PublicKey(t),u=Q(),l=vn(i),p=s&&l.find((function(e){return e.address.equals(s)}));Object(a.useEffect)((function(){p&&p.deprecated&&(console.log("Switching markets from deprecated",p),Ht&&n(Ht.address.toBase58()))}),[]);var f=Object(a.useState)(),h=Object(d.a)(f,2),j=h[0],m=h[1];return Object(a.useEffect)((function(){var e;j&&p&&(null===(e=j._decoded.ownAddress)||void 0===e?void 0:e.equals(null===p||void 0===p?void 0:p.address))||(m(null),p&&p.address?Le.Market.load(u,p.address,{},p.programId).then(m).catch((function(e){return se({message:"Error loading market",description:e.message,type:"error"})})):se({message:"Error loading market",description:"Please select a market from the dropdown",type:"error"}))}),[u,p]),Object(U.jsx)(Wt.Provider,{value:Object(ne.a)(Object(ne.a)({market:j},Vt(j,i)),{},{setMarketAddress:n,customMarkets:i,setCustomMarkets:c}),children:r})}function Yt(e){if(!e){var t=localStorage.getItem("marketAddress");t&&(e=JSON.parse(t)),e=e||(null===Ht||void 0===Ht?void 0:Ht.address.toBase58())||""}return"/market/".concat(e)}function Xt(){var e=I("selectedTokenAccounts",{}),t=Object(d.a)(e,2);return[t[0],t[1]]}function Zt(){var e=Object(a.useContext)(Wt);if(!e)throw new Error("Missing market context");return e}function $t(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],o=nn(),i=Object(d.a)(o,1)[0],c=function(){var e=en(arguments.length>0&&void 0!==arguments[0]?arguments[0]:100);if(!e)return null;return e.filter((function(e){return e.eventFlags.maker})).map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{side:"buy"===e.side?"sell":"buy"})}))}();return Object(a.useEffect)((function(){var e,t,n=(null===i||void 0===i||null===(e=i.bids)||void 0===e?void 0:e.length)>0&&Number(i.bids[0][0]),a=(null===i||void 0===i||null===(t=i.asks)||void 0===t?void 0:t.length)>0&&Number(i.asks[0][0]),o=c&&c.length>0&&c[0].price,s=n&&a?o?[n,a,o].sort((function(e,t){return e-t}))[1]:(n+a)/2:null;r(s)}),[i,c]),n}function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=Zt(),n=t.market,r=Q();function a(){return o.apply(this,arguments)}function o(){return(o=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&r){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.loadFills(r,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var i=D(a,Object(W.a)("getUnfilteredTrades",n,r),{refreshInterval:Jt}),c=Object(d.a)(i,1),s=c[0];return s}function tn(){var e=Zt().market,t=$(e&&e._decoded.bids),n=$(e&&e._decoded.asks);return{bidOrderbook:e&&t?Le.Orderbook.decode(e,t):null,askOrderbook:e&&n?Le.Orderbook.decode(e,n):null}}function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=tn(),n=t.bidOrderbook,r=t.askOrderbook,a=Zt(),o=a.market,i=n&&o?n.getL2(e).map((function(e){var t=Object(d.a)(e,2);return[t[0],t[1]]})):[],c=r&&o?r.getL2(e).map((function(e){var t=Object(d.a)(e,2);return[t[0],t[1]]})):[];return[{bids:i,asks:c},!!i||!!c]}function rn(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Zt(),n=t.market,r=Ie(),a=r.connected,o=r.wallet,i=Q();function c(){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&o){e.next=2;break}return e.abrupt("return",null);case 2:if(n){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,n.findOpenOrdersAccountsForOwner(i,o.publicKey);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return D(c,Object(W.a)("getOpenOrdersAccounts",o,n,a),{refreshInterval:e?1e3:Jt})}function an(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=rn(e),n=Object(d.a)(t,1),r=n[0];return r?r[0]:null}function on(){var e=Ie(),t=e.connected,n=e.wallet,r=Q();function a(){return(a=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Bt(r,n.publicKey);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return D((function(){return a.apply(this,arguments)}),Object(W.a)("getTokenAccounts",n,t),{refreshInterval:Jt})}function cn(e,t,n){if(!e||!t)return null;var r=e.filter((function(e){var r=e.effectiveMint,a=e.pubkey;return t.equals(r)&&(!n||("string"===typeof n?n:n.toBase58())===a.toBase58())}));return r&&r[0]}function sn(){var e=on(),t=Object(d.a)(e,1)[0],n=Zt().market,r=Xt(),a=Object(d.a)(r,1)[0],o=null===n||void 0===n?void 0:n.quoteMintAddress;return cn(t,o,o&&a[o.toBase58()])}function un(){var e=on(),t=Object(d.a)(e,1)[0],n=Zt().market,r=Xt(),a=Object(d.a)(r,1)[0],o=null===n||void 0===n?void 0:n.baseMintAddress;return cn(t,o,o&&a[o.toBase58()])}function ln(){var e,t=sn(),n=Zt().market,r=Z(null===t||void 0===t?void 0:t.pubkey),a=Object(d.a)(r,2),o=a[0],i=a[1];return n&&t&&i&&o?n.quoteMintAddress.equals(Le.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.quoteSplSizeToNumber(new h.a(o.data.slice(64,72),10,"le")):null}function dn(){var e,t=un(),n=Zt().market,r=Z(null===t||void 0===t?void 0:t.pubkey),a=Object(d.a)(r,2),o=a[0],i=a[1];return n&&t&&i&&o?n.baseMintAddress.equals(Le.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.baseSplSizeToNumber(new h.a(o.data.slice(64,72),10,"le")):null}function pn(){var e=I("feeDiscountKey",void 0),t=Object(d.a)(e,2),n=t[0],r=t[1];return{storedFeeDiscountKey:n?new b.PublicKey(n):void 0,setStoredFeeDiscountKey:r}}function bn(){var e=Zt().market,t=Ie(),n=t.connected,r=t.wallet,a=Q(),o=pn().setStoredFeeDiscountKey,i=function(){var t=Object(l.a)(u.a.mark((function t(){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&r){t.next=2;break}return t.abrupt("return",null);case 2:if(e){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,e.findFeeDiscountKeys(a,r.publicKey);case 6:return(i=t.sent)&&o(i[0].pubkey.toBase58()),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return D(i,Object(W.a)("getFeeDiscountKeys",r,e,n),{refreshInterval:Jt})}function fn(){var e=function(){var e,t=Ie(),n=t.wallet,r=t.connected,a=Q(),o=On(),i=Object(C.a)(new Set(o.map((function(e){return e.programId.toBase58()})))).map((function(e){return new b.PublicKey(e)})),c=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Promise.all(i.map((function(e){return Le.OpenOrders.findForOwner(a,n.publicKey,e)})));case 4:return e.abrupt("return",e.sent.flat());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return D(c,Object(W.a)("getAllOpenOrdersAccounts",a,r,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58(),o.length,(i||[]).length),{refreshInterval:Jt})}(),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Rt(),o=Object(d.a)(a,2),i=o[0],c=o[1],s=Lt(),f=Object(d.a)(s,1)[0];if(!r||!c)return{};var j,m=Object.fromEntries((f||[]).map((function(e){return[e.market.address.toBase58(),e]}))),v={},O=Object(p.a)(n||[]);try{for(O.s();!(j=O.n()).done;){var x=j.value,g=m[x.market.toBase58()],y=null===g||void 0===g?void 0:g.market.baseMintAddress.toBase58(),S=null===g||void 0===g?void 0:g.market.quoteMintAddress.toBase58();y in v||(v[y]=[]),S in v||(v[S]=[]);var _=i&&i[y],I=k(new h.a(x.baseTokenFree),w((null===_||void 0===_?void 0:_.decimals)||0)),A=k(new h.a(x.baseTokenTotal),w((null===_||void 0===_?void 0:_.decimals)||0)),T=i&&i[S],P=k(new h.a(x.quoteTokenFree),w((null===T||void 0===T?void 0:T.decimals)||0)),M=k(new h.a(x.quoteTokenTotal),w((null===T||void 0===T?void 0:T.decimals)||0));v[y].push({market:x.market,free:I,total:A}),v[S].push({market:x.market,free:P,total:M})}}catch(E){O.e(E)}finally{O.f()}return v}var hn;function jn(){var e=dn(),t=ln(),n=an(!0),r=Zt(),a=r.baseCurrency,o=r.quoteCurrency,i=r.market,c=n&&n.baseTokenTotal&&n.baseTokenFree,s=n&&n.quoteTokenTotal&&n.quoteTokenFree;return"UNKNOWN"!==a&&"UNKNOWN"!==o&&a&&o?[{market:i,key:"".concat(a).concat(o).concat(a),coin:a,wallet:e,orders:c&&i&&n?i.baseSplSizeToNumber(n.baseTokenTotal.sub(n.baseTokenFree)):null,openOrders:n,unsettled:c&&i&&n?i.baseSplSizeToNumber(n.baseTokenFree):null},{market:i,key:"".concat(o).concat(a).concat(o),coin:o,wallet:t,openOrders:n,orders:s&&i&&n?i.quoteSplSizeToNumber(n.quoteTokenTotal.sub(n.quoteTokenFree)):null,unsettled:s&&i&&n?i.quoteSplSizeToNumber(n.quoteTokenFree):null}]:[]}function mn(){var e=Q(),t=qt().accounts,n=t&&Array.from(new Set(t.map((function(e){return e.market})))),r=n&&n.map((function(e){return e.toBase58()})),a=function(){var t=Object(l.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return r=function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Dt.find((function(e){return e.address.equals(n)}))){t.next=5;break}return console.log("Failed loading market"),se({message:"Error loading market",type:"error"}),t.abrupt("return",null);case 5:return t.prev=5,console.log("Loading market",r.name),t.next=9,Le.Market.load(e,r.address,{},r.programId);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(5),console.log("Failed loading market",r.name,t.t0),se({message:"Error loading market",description:t.t0.message,type:"error"}),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),t.next=5,Promise.all(n.map(r));case 5:return t.abrupt("return",t.sent.filter((function(e){return e})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=D(a,Object(W.a)("useUnmigratedDeprecatedMarketsInner",e,r&&r.toString()),{refreshInterval:Ut}),i=Object(d.a)(o,1)[0];return i?i.map((function(e){return{market:e,openOrdersList:null===t||void 0===t?void 0:t.filter((function(t){return e&&t.market.equals(e.address)}))}})):null}function vn(e){var t=e.map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{address:new b.PublicKey(e.address),programId:new b.PublicKey(e.programId),deprecated:!1})}));return[].concat(Object(C.a)(t),Object(C.a)(Dt))}function On(){return vn(Gt().customMarkets)}function xn(e,t,n){if(e.isBids)return e.market.tickSize;var r,a,o,i=0,c=e.getL2(1e3),s=Object(p.a)(c);try{for(s.s();!(o=s.n()).done;){var u=Object(d.a)(o.value,2);if(i+(a=(r=u[0])*u[1])>t)break;i+=a}}catch(b){s.e(b)}finally{s.f()}var l=Math.min(1.02*r,1.05*c[0][0]);return n?x(l,n):l}function gn(e,t,n){var r,a,o,i,c=0,s=0,u=Object(p.a)(e.getL2(1e3));try{for(u.s();!(i=u.n()).done;){var l=Object(d.a)(i.value,2);if(r=l[0],a=l[1],c+(o=(e.isBids?1:r)*a)>t){s+=(t-c)*r,c=t;break}s+=o*r,c+=o}}catch(f){u.e(f)}finally{u.f()}var b=s/Math.min(t,c);return n?x(b,n):b}function yn(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){clearInterval(e)}}}),[t])}var kn=Ce.c.div(hn||(hn=Object(Te.a)(["\n  margin: 5px;\n  padding: 20px;\n  background-color: #1a2029;\n"])));function wn(e){var t=e.style,n=void 0===t?void 0:t,r=e.children,a=e.stretchVertical,o=void 0!==a&&a;return Object(U.jsx)(kn,{style:Object(ne.a)({height:o?"calc(100% - 10px)":void 0},n),children:r})}var Sn,_n,In,An,Tn,Cn,Pn,Mn=n(731),En=n(732),Fn=Ce.c.div(Sn||(Sn=Object(Te.a)(["\n  color: rgba(255, 255, 255, 1);\n"]))),Bn=Object(Ce.c)(Re.a)(_n||(_n=Object(Te.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]))),Nn=Object(Ce.c)(Re.a)(In||(In=Object(Te.a)(["\n  padding: 20px 0 14px;\n  font-weight: 700;\n"]))),Kn=Ce.c.div(An||(An=Object(Te.a)(["\n  text-align: right;\n  float: right;\n  height: 100%;\n  ","\n  ","\n"])),(function(e){return e["data-width"]&&Object(Ce.b)(Tn||(Tn=Object(Te.a)(["\n      width: ",";\n    "])),e["data-width"])}),(function(e){return e["data-bgcolor"]&&Object(Ce.b)(Cn||(Cn=Object(Te.a)(["\n      background-color: ",";\n    "])),e["data-bgcolor"])})),Rn=Ce.c.div(Pn||(Pn=Object(Te.a)(["\n  position: absolute;\n  right: 5px;\n  color: white;\n"])));function zn(e){var t=e.smallScreen,n=e.depth,r=void 0===n?7:n,o=e.onPrice,i=e.onSize,c=$t(),s=nn(),u=Object(d.a)(s,1)[0],l=Zt(),p=l.baseCurrency,b=l.quoteCurrency,f=Object(a.useRef)(null),h=Object(a.useRef)(null),j=Object(a.useState)(null),m=Object(d.a)(j,2),v=m[0],O=m[1];function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.slice(0,r).reduce((function(e,n,r){var a,o=Object(d.a)(n,2),i=o[0],c=o[1],s=((null===(a=e[r-1])||void 0===a?void 0:a.cumulativeSize)||0)+c;return e.push({price:i,size:c,cumulativeSize:s,sizePercent:Math.round(s/(t||1)*100)}),e}),[]);return n&&(a=a.reverse()),a}return yn((function(){if(!f.current||JSON.stringify(f.current)!==JSON.stringify(h.current)){var e=(null===u||void 0===u?void 0:u.bids)||[],t=(null===u||void 0===u?void 0:u.asks)||[],n=function(e,t,n){var a=Object(d.a)(t,2)[1];return n<r?e+a:e},a=e.reduce(n,0)+t.reduce(n,0),o=x(e,a,!1),i=x(t,a,!0);f.current={bids:null===u||void 0===u?void 0:u.bids,asks:null===u||void 0===u?void 0:u.asks},O({bids:o,asks:i})}}),250),Object(a.useEffect)((function(){h.current={bids:null===u||void 0===u?void 0:u.bids,asks:null===u||void 0===u?void 0:u.asks}}),[u]),Object(U.jsxs)(wn,{style:t?{flex:1}:{height:"500px",overflow:"hidden"},children:[Object(U.jsx)(Fn,{children:"Orderbook"}),Object(U.jsxs)(Bn,{children:[Object(U.jsxs)(ze.a,{span:12,style:{textAlign:"left"},children:["Size (",p,")"]}),Object(U.jsxs)(ze.a,{span:12,style:{textAlign:"right"},children:["Price (",b,")"]})]}),null===v||void 0===v?void 0:v.asks.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return Object(U.jsx)(Dn,{price:t,size:n,side:"sell",sizePercent:r,onPriceClick:function(){return o(t)},onSizeClick:function(){return i(n)}},t+"")})),Object(U.jsx)(Ln,{markPrice:c}),null===v||void 0===v?void 0:v.bids.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return Object(U.jsx)(Dn,{price:t,size:n,side:"buy",sizePercent:r,onPriceClick:function(){return o(t)},onSizeClick:function(){return i(n)}},t+"")}))]})}var Dn=o.a.memo((function(e){var t=e.side,n=e.price,r=e.size,o=e.sizePercent,i=e.onSizeClick,c=e.onPriceClick,s=Object(a.useRef)(),u=Zt().market;Object(a.useEffect)((function(){var e,t;!(null===(e=s.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=s.current)||void 0===t||t.classList.add("flash"));var n=setTimeout((function(){var e,t;return(null===(e=s.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=s.current)||void 0===t?void 0:t.classList.remove("flash"))}),250);return function(){return clearTimeout(n)}}),[n,r]);var l=(null===u||void 0===u?void 0:u.minOrderSize)&&!isNaN(r)?Number(r).toFixed(y(u.minOrderSize)+1):r,d=(null===u||void 0===u?void 0:u.tickSize)&&!isNaN(n)?Number(n).toFixed(y(u.tickSize)+1):n;return Object(U.jsxs)(Re.a,{ref:s,style:{marginBottom:1},onClick:i,children:[Object(U.jsx)(ze.a,{span:12,style:{textAlign:"left"},children:l}),Object(U.jsxs)(ze.a,{span:12,style:{textAlign:"right"},children:[Object(U.jsx)(Kn,{"data-width":o+"%","data-bgcolor":"buy"===t?"rgba(65, 199, 122, 0.6)":"rgba(242, 60, 105, 0.6)"}),Object(U.jsx)(Rn,{onClick:c,children:d})]})]})}),(function(e,t){return T(e,t,["price","size","sizePercent"])})),Ln=o.a.memo((function(e){var t=e.markPrice,n=Zt().market,r=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}(t),o=t>r?"#41C77A":t<r?"#F23B69":"white",i=t&&(null===n||void 0===n?void 0:n.tickSize)&&t.toFixed(y(n.tickSize));return Object(U.jsx)(Nn,{justify:"center",children:Object(U.jsxs)(ze.a,{style:{color:o},children:[t>r&&Object(U.jsx)(Mn.a,{style:{marginRight:5}}),t<r&&Object(U.jsx)(En.a,{style:{marginRight:5}}),i||"----"]})})}),(function(e,t){return T(e,t,["markPrice"])})),qn=n(32),Wn=n(721);function Un(e){var t=e.dataSource,n=e.columns,r=e.emptyLabel,a=void 0===r?"No data":r,o=e.pagination,i=void 0!==o&&o,c=e.loading,s=void 0!==c&&c,u=e.pageSize,l=void 0===u?10:u;return Object(U.jsx)(qn.b,{renderEmpty:function(){return Object(U.jsx)("div",{style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"},children:a})},children:Object(U.jsx)(Wn.a,{dataSource:t,columns:n,pagination:!!i&&{pagination:!0,pageSize:l},loading:s})})}var Jn=n(197),Hn=o.a.createContext(null),Vn=new b.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Gn=new b.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Qn=new b.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB");function Yn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.PublicKey.findProgramAddress([t.toBuffer(),Ue.b.toBuffer(),n.toBuffer()],Vn);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zn=new b.PublicKey("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),$n=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Jn.getHashedName)(t);case 2:return n=e.sent,e.next=5,Object(Jn.getNameAccountKey)(n,void 0,Zn);case 5:return r=e.sent,e.abrupt("return",{inputDomainKey:r,hashedInputName:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),er=function(e){var t=e.children,n=!0,r=I("refCode"),o=Object(d.a)(r,2),i=o[0],c=o[1],s=function(e){var t=Q(),n=Object(a.useState)(void 0),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Object(a.useState)(void 0),s=Object(d.a)(c,2),p=s[0],f=s[1];return Object(a.useEffect)((function(){var n=function(){var n=Object(l.a)(u.a.mark((function n(){var r,a,o,c,s,l,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=void 0,a=void 0,e){n.next=6;break}return i(new b.PublicKey("8ggGZPWkAMFee2NcKE7jgidMmBYxut2bNuEShAf9KgRN")),f(new b.PublicKey("8ggGZPWkAMFee2NcKE7jgidMmBYxut2bNuEShAf9KgRN")),n.abrupt("return");case 6:if(n.prev=6,!e.includes(".sol")){n.next=17;break}return n.next=10,$n(e.replace(".sol",""));case 10:return c=n.sent,s=c.inputDomainKey,n.next=14,Jn.NameRegistryState.retrieve(t,s);case 14:o=n.sent,n.next=20;break;case 17:return n.next=19,Object(Jn.getTwitterRegistry)(t,e);case 19:o=n.sent;case 20:return n.next=22,Yn(o.owner,Gn);case 22:return r=n.sent,n.next=25,Yn(o.owner,Qn);case 25:return a=n.sent,n.next=28,t.getAccountInfo(r);case 28:return l=n.sent,n.next=31,t.getAccountInfo(a);case 31:d=n.sent,(null===l||void 0===l?void 0:l.data)&&i(r),(null===d||void 0===d?void 0:d.data)&&f(a),n.next=39;break;case 36:n.prev=36,n.t0=n.catch(6),console.warn("Error getting refcode ".concat(n.t0));case 39:case"end":return n.stop()}}),n,null,[[6,36]])})));return function(){return n.apply(this,arguments)}}();n()}),[t,e]),{usdcRef:o,usdtRef:p}}(i),p=s.usdcRef,f=s.usdtRef;return Object(a.useEffect)((function(){0}),[n,c]),Object(U.jsx)(Hn.Provider,{value:{usdcRef:p,usdtRef:f,setRefCode:c,refCode:i,allowRefLink:n},children:t})},tr=function(){var e=Object(a.useContext)(Hn);if(!e)throw new Error("Missing referrer context");return{usdcRef:e.usdcRef,usdtRef:e.usdtRef,setRefCode:e.setRefCode,refCode:e.refCode,allowRefLink:e.allowRefLink}};function nr(e){var t=e.balances,n=e.showMarket,r=e.hideWalletBalance,a=e.onSettleSuccess,o=on(),i=Object(d.a)(o,1)[0],c=Y(),s=Ie().wallet,p=tr(),b=p.usdcRef,f=p.usdtRef;function h(){return(h=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe({market:t,openOrders:n,connection:c,wallet:s,baseCurrencyAccount:cn(i,null===t||void 0===t?void 0:t.baseMintAddress),quoteCurrencyAccount:cn(i,null===t||void 0===t?void 0:t.quoteMintAddress),usdcRef:b,usdtRef:f});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),se({message:"Error settling funds",description:e.t0.message,type:"error"}),e.abrupt("return");case 9:a&&a();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var j=[n?{title:"Market",dataIndex:"marketName",key:"marketName"}:null,{title:"Coin",dataIndex:"coin",key:"coin"},r?null:{title:"Wallet Balance",dataIndex:"wallet",key:"wallet"},{title:"Orders",dataIndex:"orders",key:"orders"},{title:"Unsettled",dataIndex:"unsettled",key:"unsettled"},{key:"action",render:function(e){var t=e.market,n=e.openOrders,r=e.marketName;return Object(U.jsx)("div",{style:{textAlign:"right"},children:Object(U.jsxs)(le.a,{ghost:!0,style:{marginRight:12},onClick:function(){return function(e,t){return h.apply(this,arguments)}(t,n)},children:["Settle ",r]})})}}].filter((function(e){return e}));return Object(U.jsx)(Un,{emptyLabel:"No balances",dataSource:t,columns:j,pagination:!1})}var rr,ar=n(729),or=n(733),ir=Object(Ce.c)(le.a)(rr||(rr=Object(Te.a)(["\n  color: #f23b69;\n  border: 1px solid #f23b69;\n"])));function cr(e){var t=e.openOrders,n=e.onCancelSuccess,r=e.pageSize,o=e.loading,i=e.marketFilter,c=Ie().wallet,s=Y(),p=Object(a.useState)(null),b=Object(d.a)(p,2),f=b[0],h=b[1];function j(){return(j=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(null===t||void 0===t?void 0:t.orderId),e.prev=1,c){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,$e({order:t,market:t.market,connection:s,wallet:c});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),se({message:"Error cancelling order",description:e.t0.message,type:"error"}),e.abrupt("return");case 12:return e.prev=12,h(null),e.finish(12);case 15:n&&n();case 16:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))).apply(this,arguments)}var m=Object(C.a)(new Set((t||[]).map((function(e){return e.marketName})))).map((function(e){return{text:e,value:e}})),v=[{title:"Market",dataIndex:"marketName",key:"marketName",filters:i?m:void 0,onFilter:function(e,t){return 0===t.marketName.indexOf(e)}},{title:"Side",dataIndex:"side",key:"side",render:function(e){return Object(U.jsx)(ar.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700},children:e.charAt(0).toUpperCase()+e.slice(1)})},sorter:function(e,t){return e.side===t.side?0:"buy"===e.side?1:-1},showSorterTooltip:!1},{title:"Size",dataIndex:"size",key:"size",sorter:function(e,t){return t.size-e.size},showSorterTooltip:!1},{title:"Price",dataIndex:"price",key:"price",sorter:function(e,t){return t.price-e.price},showSorterTooltip:!1},{key:"orderId",render:function(e){return Object(U.jsx)("div",{style:{textAlign:"right"},children:Object(U.jsx)(ir,{icon:Object(U.jsx)(or.a,{}),onClick:function(){return function(e){return j.apply(this,arguments)}(e)},loading:f+""===(null===e||void 0===e?void 0:e.orderId)+"",children:"Cancel"})})}}],O=(t||[]).map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{key:e.orderId})}));return Object(U.jsx)(Re.a,{children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Un,{emptyLabel:"No open orders",dataSource:O,columns:v,pagination:!0,pageSize:r||5,loading:void 0!==o&&o})})})}var sr=n(722);function ur(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=Zt().marketName,n=en(e),r=rn(),a=Object(d.a)(r,1)[0];return a&&0!==a.length&&n?n.filter((function(e){return a.some((function(t){return e.openOrders.equals(t.publicKey)}))})).map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{marketName:t})})):null}(),t=Zt().quoteCurrency,n=[{title:"Market",dataIndex:"marketName",key:"marketName"},{title:"Side",dataIndex:"side",key:"side",render:function(e){return Object(U.jsx)(ar.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700},children:e.charAt(0).toUpperCase()+e.slice(1)})}},{title:"Size",dataIndex:"size",key:"size"},{title:"Price",dataIndex:"price",key:"price"},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity"},{title:t?"Fees (".concat(t,")"):"Fees",dataIndex:"feeCost",key:"feeCost"}],r=(e||[]).map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{key:"".concat(e.orderId).concat(e.side),liquidity:e.eventFlags.maker?"Maker":"Taker"})}));return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Re.a,{children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Un,{dataSource:r,columns:n,pagination:!0,pageSize:5,emptyLabel:"No fills"})})})})}function lr(){var e=bn(),t=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier",render:function(e,t){return Object(U.jsxs)("div",{style:{display:"flex"},children:[Object(U.jsx)(Ee.a,{children:e}),0===t.index?Object(U.jsx)("div",{style:{marginLeft:10},children:Object(U.jsx)(ar.a,{color:"#41C77A",style:{fontWeight:700},children:"Selected"})}):null]})}},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return O.format(Object(Le.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return O.format(Object(Le.getFeeRates)(t.feeTier).maker)}},{title:"Public Key",dataIndex:"pubkey",key:"pubkey",render:function(e){return e.toBase58()}},{title:"Balance",dataIndex:"balance",key:"balance"},{title:"Mint",dataIndex:"mint",key:"mint",render:function(e,t){return t.mint.equals(Le.TokenInstructions.SRM_MINT)?"SRM":t.mint.equals(Le.TokenInstructions.MSRM_MINT)?"MSRM":"UNKNOWN"}}],n=(Object(d.a)(e,1)[0]||[]).map((function(e,t){return Object(ne.a)(Object(ne.a)({},e),{},{index:t,key:e.pubkey.toBase58()})}));return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Re.a,{children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Un,{dataSource:n,columns:t,pagination:!0,pageSize:5,emptyLabel:"No (M)SRM accounts"})})}),Object(U.jsx)(Re.a,{style:{marginTop:8},children:Object(U.jsxs)(ze.a,{children:[Object(U.jsx)(Ee.a,{children:"Holding SRM or MSRM makes you eligible for fee discounts:"}),Object(U.jsx)(dr,{})]})})]})}function dr(){var e=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier"},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return O.format(Object(Le.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return O.format(Object(Le.getFeeRates)(t.feeTier).maker)}},{title:"Requirements",dataIndex:"requirements",key:"requirements",render:function(e,t){return Object(U.jsx)(Ee.a,{children:t.balance?"\u2265 ".concat(t.balance," ").concat(t.token):"None"})}}];return Object(U.jsx)(Un,{dataSource:[{feeTier:0,taker:.0022,maker:-3e-4,token:"",balance:""},{feeTier:1,taker:.002,maker:-3e-4,token:"SRM",balance:100},{feeTier:2,taker:.0018,maker:-3e-4,token:"SRM",balance:1e3},{feeTier:3,taker:.0016,maker:-3e-4,token:"SRM",balance:1e4},{feeTier:4,taker:.0014,maker:-3e-4,token:"SRM",balance:1e5},{feeTier:5,taker:.0012,maker:-3e-4,token:"SRM",balance:1e6},{feeTier:6,taker:.001,maker:-5e-4,token:"MSRM",balance:1}].map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{key:e.feeTier})})),columns:e})}var pr=Ee.a.Paragraph,br=sr.a.TabPane;function fr(){var e=Zt().market;return Object(U.jsxs)(wn,{style:{flex:1,paddingTop:20},children:[Object(U.jsxs)(Ee.a,{children:[Object(U.jsx)(pr,{style:{color:"rgba(255,255,255,0.5)"},children:"Make sure to go to Balances and click Settle to send out your funds."}),Object(U.jsxs)(pr,{style:{color:"rgba(255,255,255,0.5)"},children:["To fund your wallet, ",Object(U.jsx)("a",{href:"https://www.sollet.io",children:"sollet.io"}),". You can get SOL from FTX, Binance, BitMax, and others. You can get other tokens from FTX."," "]})]}),Object(U.jsxs)(sr.a,{defaultActiveKey:"orders",children:[Object(U.jsx)(br,{tab:"Open Orders",children:Object(U.jsx)(hr,{})},"orders"),Object(U.jsx)(br,{tab:"Recent Trade History",children:Object(U.jsx)(ur,{})},"fills"),Object(U.jsx)(br,{tab:"Balances",children:Object(U.jsx)(jr,{})},"balances"),e&&e.supportsSrmFeeDiscounts?Object(U.jsx)(br,{tab:"Fee discounts",children:Object(U.jsx)(lr,{})},"fees"):null]})]})}var hr=function(){var e=function(){var e=Zt(),t=e.market,n=e.marketName,r=an(),a=tn(),o=a.bidOrderbook,i=a.askOrderbook;return t&&r&&o&&i?t.filterForOpenOrders(o,i,[r]).map((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{marketName:n,market:t})})):null}();return Object(U.jsx)(cr,{openOrders:e})},jr=function(){var e=jn();return Object(U.jsx)(nr,{balances:e})},mr=n(718);function vr(e){var t,n,r,a=e.onClose,o=e.baseOrQuote,i=Zt(),c=i.market,s=i.baseCurrency,u=i.quoteCurrency,l=Ie(),d=l.providerName,p=l.providerUrl,b=un(),f=sn();return"base"===o?(t=null===c||void 0===c?void 0:c.baseMintAddress,n=b,r=s):"quote"===o?(t=null===c||void 0===c?void 0:c.quoteMintAddress,n=f,r=u):n=null,t?Object(U.jsx)(ue.a,{title:r,visible:!!t,onOk:a,onCancel:a,children:Object(U.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(U.jsx)("p",{style:{color:"white"},children:"Mint address:"}),Object(U.jsx)("p",{style:{color:"rgba(255,255,255,0.5)"},children:t.toBase58()}),Object(U.jsxs)("div",{children:[Object(U.jsx)("p",{style:{color:"white"},children:"SPL Deposit address:"}),Object(U.jsx)("p",{style:{color:"rgba(255,255,255,0.5)"},children:n?n.pubkey.toBase58():Object(U.jsxs)(U.Fragment,{children:["Visit"," ",Object(U.jsx)(ce,{external:!0,to:p,children:d})," ","to create an account for this mint"]})})]})]})}):null}var Or=n(439);function xr(e){var t,n=e.accounts,r=e.mint,a=e.label,i=Xt(),c=Object(d.a)(i,2),s=c[0],u=c[1];t=r&&r in s?s[r]:n&&(null===n||void 0===n?void 0:n.length)>0?n[0].pubkey.toBase58():void 0;return Object(U.jsxs)(o.a.Fragment,{children:[a&&Object(U.jsx)(ze.a,{span:8,children:"Token account:"}),Object(U.jsx)(ze.a,{span:a?13:21,children:Object(U.jsx)(Ke.a,{style:{width:"100%"},value:t,onSelect:function(e){if(r){var t=Object(ne.a)({},s);t[r]=e,u(t)}else se({message:"Error selecting token account",description:"Mint is undefined",type:"error"})},children:null===n||void 0===n?void 0:n.map((function(e){return Object(U.jsx)(Ke.a.Option,{value:e.pubkey.toBase58(),children:Object(U.jsx)(Ee.a.Text,{code:!0,children:a?A(e.pubkey,8):e.pubkey.toBase58()})},e.pubkey.toBase58())}))})}),Object(U.jsx)(ze.a,{span:2,offset:1,children:Object(U.jsx)(le.a,{shape:"round",icon:Object(U.jsx)(Or.a,{}),size:"small",onClick:function(){return t&&navigator.clipboard.writeText(t)}})})]})}var gr=n(734);function yr(e){var t=e.title,n=e.address,r=e.shorten,a=void 0!==r&&r;return Object(U.jsxs)("div",{children:[t&&Object(U.jsx)("p",{style:{color:"white"},children:t}),Object(U.jsx)(le.a,{type:"link",icon:Object(U.jsx)(gr.a,{}),href:"https://solscan.io/address/"+n,target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:a?"".concat(n.slice(0,4),"...").concat(n.slice(-4)):n})]})}var kr,wr,Sr,_r=n(253),Ir=o.a.createContext(null);function Ar(e){var t=e.children,n=I("autoSettleEnabled",!0),r=Object(d.a)(n,2),o=r[0],i=r[1],c=on(),s=Object(d.a)(c,1)[0],b=Ie(),f=b.connected,h=b.wallet,j=On(),v=Object(a.useState)(!1),O=Object(d.a)(v,2),x=O[0],g=O[1],y=Object(a.useState)(new Map),k=Object(d.a)(y,2),w=k[0],S=k[1],_=function(e,t){S((function(n){return new Map(n).set(e,t)}))},A=Q();return yn((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(h){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,console.log("Settling funds..."),e.next=8,Xe({connection:A,wallet:h,tokenAccounts:s||[],markets:Object(C.a)(w.values())});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log("Error auto settling funds: "+e.t0.message),e.abrupt("return");case 14:console.log("Finished settling funds.");case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();f&&(null===h||void 0===h?void 0:h.autoApprove)&&o&&e()}),2e4),yn((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:g(!0),t=Object(p.a)(j),e.prev=4,t.s();case 6:if((n=t.n()).done){e.next=24;break}if(r=n.value,!w.has(r.address.toString())){e.next=10;break}return e.abrupt("continue",22);case 10:return e.prev=10,e.next=13,Le.Market.load(A,r.address,{},r.programId);case 13:return a=e.sent,_(r.address.toString(),a),e.next=17,m(1e3);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log("Error fetching market: "+e.t0.message);case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),t.e(e.t1);case 29:return e.prev=29,t.f(),e.finish(29);case 32:g(!1);case 33:case"end":return e.stop()}}),e,null,[[4,26,29,32],[10,19]])})));return function(){return e.apply(this,arguments)}}();f&&(null===h||void 0===h?void 0:h.autoApprove)&&o&&!x&&e()}),6e4),Object(U.jsx)(Ir.Provider,{value:{autoSettleEnabled:o,setAutoSettleEnabled:i},children:t})}var Tr=Object(Ce.c)(Re.a)(kr||(kr=Object(Te.a)(["\n  padding-bottom: 20px;\n"]))),Cr=Ce.c.p(wr||(wr=Object(Te.a)(["\n  font-size: 12px;\n  padding-top: 6px;\n"]))),Pr=Object(Ce.c)(le.a)(Sr||(Sr=Object(Te.a)(["\n  color: #2abdd2;\n  background-color: #212734;\n  border-width: 0px;\n"])));function Mr(){var e=Zt(),t=e.baseCurrency,n=e.quoteCurrency,r=e.market,i=jn(),c=an(!0),s=Y(),p=Ie(),b=p.providerUrl,f=p.providerName,h=p.wallet,j=p.connected,m=Object(a.useState)(""),v=Object(d.a)(m,2),O=v[0],x=v[1],g=un(),y=sn(),k=on(),w=Object(d.a)(k,1)[0],S=i&&i.find((function(e){return e.coin===t})),_=i&&i.find((function(e){return e.coin===n})),A=I("autoSettleEnabled",!0),T=Object(d.a)(A,1)[0],C=Object(a.useState)(0),P=Object(d.a)(C,2),M=P[0],E=P[1],F=tr(),B=F.usdcRef,N=F.usdtRef;function K(){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=3;break}return se({message:"Wallet not connected",description:"wallet is undefined",type:"error"}),e.abrupt("return");case 3:if(r){e.next=6;break}return se({message:"Error settling funds",description:"market is undefined",type:"error"}),e.abrupt("return");case 6:if(c){e.next=9;break}return se({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 9:if(g){e.next=12;break}return se({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 12:if(y){e.next=15;break}return se({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 15:return e.prev=15,e.next=18,Qe({market:r,openOrders:c,connection:s,wallet:h,baseCurrencyAccount:g,quoteCurrencyAccount:y,usdcRef:B,usdtRef:N});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),se({message:"Error settling funds",description:e.t0.message,type:"error"});case 23:case"end":return e.stop()}}),e,null,[[15,20]])})))).apply(this,arguments)}yn((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if((null===S||void 0===S?void 0:S.unsettled)||(null===_||void 0===_?void 0:_.unsettled)){e.next=4;break}return e.abrupt("return");case 4:if(!(Date.now()-M<15e3)){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,console.log("Settling funds..."),E(Date.now()),e.next=11,Qe({market:r,openOrders:c,connection:s,wallet:h,baseCurrencyAccount:g,quoteCurrencyAccount:y,usdcRef:B,usdtRef:N});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),console.log("Error auto settling funds: "+e.t0.message),e.abrupt("return");case 17:console.log("Finished settling funds.");case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();j&&(null===h||void 0===h?void 0:h.autoApprove)&&T&&e()}),1e3);var z=[[t,S,"base",null===r||void 0===r?void 0:r.baseMintAddress.toBase58()],[n,_,"quote",null===r||void 0===r?void 0:r.quoteMintAddress.toBase58()]];return Object(U.jsxs)(wn,{style:{flex:1,paddingTop:10},children:[z.map((function(e,t){var n=Object(d.a)(e,4),r=n[0],a=n[1],i=n[2],c=n[3];return Object(U.jsxs)(o.a.Fragment,{children:[Object(U.jsxs)(mr.a,{style:{borderColor:"white"},children:[r," ",c&&Object(U.jsx)(De.a,{content:Object(U.jsx)(yr,{address:c}),placement:"bottomRight",title:"Token mint",trigger:"hover",children:Object(U.jsx)(_r.a,{style:{color:"#2abdd2"}})})]}),j&&Object(U.jsx)(Tr,{align:"middle",style:{paddingBottom:10},children:Object(U.jsx)(xr,{accounts:null===w||void 0===w?void 0:w.filter((function(e){return e.effectiveMint.toBase58()===c})),mint:c,label:!0})}),Object(U.jsxs)(Tr,{align:"middle",justify:"space-between",style:{paddingBottom:12},children:[Object(U.jsx)(ze.a,{children:"Wallet balance:"}),Object(U.jsx)(ze.a,{children:a&&a.wallet})]}),Object(U.jsxs)(Tr,{align:"middle",justify:"space-between",style:{paddingBottom:12},children:[Object(U.jsx)(ze.a,{children:"Unsettled balance:"}),Object(U.jsx)(ze.a,{children:a&&a.unsettled})]}),Object(U.jsxs)(Tr,{align:"middle",justify:"space-around",children:[Object(U.jsx)(ze.a,{style:{width:150},children:Object(U.jsx)(Pr,{block:!0,size:"large",onClick:function(){return x(i)},children:"Deposit"})}),Object(U.jsx)(ze.a,{style:{width:150},children:Object(U.jsx)(Pr,{block:!0,size:"large",onClick:K,children:"Settle"})})]}),Object(U.jsxs)(Cr,{children:["All deposits go to your"," ",Object(U.jsx)(ce,{external:!0,to:b,children:f})," ","wallet"]})]},t)})),Object(U.jsx)(vr,{baseOrQuote:O,onClose:function(){return x("")}})]})}var Er,Fr,Br,Nr,Kr=n(248),Rr=n(728),zr=n(724),Dr=n(730),Lr=Object(Ce.c)(le.a)(Er||(Er=Object(Te.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #f23b69;\n  border-color: #f23b69;\n"]))),qr=Object(Ce.c)(le.a)(Fr||(Fr=Object(Te.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #02bf76;\n  border-color: #02bf76;\n"]))),Wr={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"};function Ur(e){var t=e.style,n=e.setChangeOrderRef,r=Object(a.useState)("buy"),o=Object(d.a)(r,2),i=o[0],c=o[1],s=Zt(),p=s.baseCurrency,b=s.quoteCurrency,f=s.market,h=dn(),j=ln(),m=un(),v=sn(),O=an(!0),k=Ie(),w=k.wallet,S=k.connected,_=Y(),I=$t();bn();var A=pn().storedFeeDiscountKey,T=Object(a.useState)(!1),C=Object(d.a)(T,2),P=C[0],M=C[1],E=Object(a.useState)(!1),F=Object(d.a)(E,2),B=F[0],N=F[1],K=Object(a.useState)(void 0),R=Object(d.a)(K,2),z=R[0],D=R[1],q=Object(a.useState)(void 0),J=Object(d.a)(q,2),H=J[0],V=J[1],G=Object(a.useState)(void 0),Q=Object(d.a)(G,2),X=Q[0],Z=Q[1],$=Object(a.useState)(!1),ee=Object(d.a)($,2),te=ee[0],re=ee[1],ae=Object(a.useState)(0),oe=Object(d.a)(ae,2),ie=oe[0],ce=oe[1],ue=(j||0)+((O&&f?f.quoteSplSizeToNumber(O.quoteTokenFree):0)||0),le=h||0,de=(null===f||void 0===f?void 0:f.minOrderSize)&&y(f.minOrderSize),pe=(null===f||void 0===f?void 0:f.tickSize)&&y(f.tickSize),be=null===w||void 0===w?void 0:w.publicKey;Object(a.useEffect)((function(){n&&n(he)}),[n]),Object(a.useEffect)((function(){z&&X&&me(ie)}),[i]),Object(a.useEffect)((function(){je()}),[X,z]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w&&be&&f){e.next=4;break}return console.log("Skipping refreshing accounts"),e.abrupt("return");case 4:return t=ct(),console.log("Refreshing accounts for ".concat(f.address)),e.next=8,null===f||void 0===f?void 0:f.findOpenOrdersAccountsForOwner(_,be);case 8:return e.next=10,null===f||void 0===f?void 0:f.findBestFeeDiscountKey(_,be);case 10:n=ct(),console.log("Finished refreshing accounts for ".concat(f.address," after ").concat(n-t)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Encountered error when refreshing trading accounts: ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(e,3e4);return function(){return clearInterval(t)}}),[f,_,w,be]);var fe=function(e){if(D(e),e){var t=X||I;if(t){var n=e&&g(e*t,de);V(n)}else V(void 0)}else V(void 0)},he=function(e){var t=e.size,n=e.price,r=t&&g(t,de),a=n&&g(n,pe);r&&fe(r),a&&Z(a)},je=function(){var e=x("buy"===i?ue/(X||I||1):le,de),t=Math.min((z||0)/e*100,100);ce(t)},me=function(e){if(!X&&I){var t=pe?I.toFixed(pe):I;Z("number"===typeof t?t:parseFloat(t))}var n;"buy"===i?(X||I)&&(n=ue/(X||I||1)*e/100):n=le*e/100;var r=x(n,de);fe(r)};function ve(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=6;break}return console.warn("Missing price"),se({message:"Missing price",type:"error"}),e.abrupt("return");case 6:if(z){e.next=10;break}return console.warn("Missing size"),se({message:"Missing size",type:"error"}),e.abrupt("return");case 10:if(re(!0),e.prev=11,w){e.next=14;break}return e.abrupt("return",null);case 14:return e.next=16,rt({side:i,price:X,size:z,orderType:B?"ioc":P?"postOnly":"limit",market:f,connection:_,wallet:w,baseCurrencyAccount:null===m||void 0===m?void 0:m.pubkey,quoteCurrencyAccount:null===v||void 0===v?void 0:v.pubkey,feeDiscountPubkey:A});case 16:L(Object(W.a)("getTokenAccounts",w,S)),Z(void 0),fe(void 0),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.warn(e.t0),se({message:"Error placing order",description:e.t0.message,type:"error"});case 25:return e.prev=25,re(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[11,21,25,28]])})))).apply(this,arguments)}return Object(U.jsxs)(wn,{style:Object(ne.a)({display:"flex",flexDirection:"column"},t),children:[Object(U.jsxs)("div",{style:{flex:1},children:[Object(U.jsxs)(Kr.a.Group,{onChange:function(e){return c(e.target.value)},value:i,buttonStyle:"solid",style:{marginBottom:8,width:"100%"},children:[Object(U.jsx)(Kr.a.Button,{value:"buy",style:{width:"50%",textAlign:"center",background:"buy"===i?"#02bf76":"",borderColor:"buy"===i?"#02bf76":""},children:"BUY"}),Object(U.jsx)(Kr.a.Button,{value:"sell",style:{width:"50%",textAlign:"center",background:"sell"===i?"#F23B69":"",borderColor:"sell"===i?"#F23B69":""},children:"SELL"})]}),Object(U.jsx)(Rr.a,{style:{textAlign:"right",paddingBottom:8},addonBefore:Object(U.jsx)("div",{style:{width:"30px"},children:"Price"}),suffix:Object(U.jsx)("span",{style:{fontSize:10,opacity:.5},children:b}),value:X,type:"number",step:(null===f||void 0===f?void 0:f.tickSize)||1,onChange:function(e){return Z(parseFloat(e.target.value))}}),Object(U.jsxs)(Rr.a.Group,{compact:!0,style:{paddingBottom:8},children:[Object(U.jsx)(Rr.a,{style:{width:"calc(50% + 30px)",textAlign:"right"},addonBefore:Object(U.jsx)("div",{style:{width:"30px"},children:"Size"}),suffix:Object(U.jsx)("span",{style:{fontSize:10,opacity:.5},children:p}),value:z,type:"number",step:(null===f||void 0===f?void 0:f.minOrderSize)||1,onChange:function(e){return fe(parseFloat(e.target.value))}}),Object(U.jsx)(Rr.a,{style:{width:"calc(50% - 30px)",textAlign:"right"},suffix:Object(U.jsx)("span",{style:{fontSize:10,opacity:.5},children:b}),value:H,type:"number",step:(null===f||void 0===f?void 0:f.minOrderSize)||1,onChange:function(e){return function(e){if(V(e),e){var t=X||I;if(t){var n=e&&g(e/t,de);D(n)}else D(void 0)}else D(void 0)}(parseFloat(e.target.value))}})]}),Object(U.jsx)(zr.a,{value:ie,tipFormatter:function(e){return"".concat(e,"%")},marks:Wr,onChange:me}),Object(U.jsxs)("div",{style:{paddingTop:18},children:["POST ",Object(U.jsx)(Dr.a,{checked:P,onChange:function(e){e&&N(!1),M(e)},style:{marginRight:40}}),"IOC ",Object(U.jsx)(Dr.a,{checked:B,onChange:function(e){e&&M(!1),N(e)}})]})]}),"buy"===i?Object(U.jsxs)(qr,{disabled:!X||!z,onClick:ve,block:!0,type:"primary",size:"large",loading:te,children:["Buy ",p]}):Object(U.jsxs)(Lr,{disabled:!X||!z,onClick:ve,block:!0,type:"primary",size:"large",loading:te,children:["Sell ",p]})]})}var Jr=Ce.c.div(Br||(Br=Object(Te.a)(["\n  color: rgba(255, 255, 255, 1);\n"]))),Hr=Object(Ce.c)(Re.a)(Nr||(Nr=Object(Te.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"])));function Vr(e){var t=e.smallScreen,n=Zt(),r=n.baseCurrency,a=n.quoteCurrency,o=n.market,i=function(){var e=Zt().market,t=null===e||void 0===e?void 0:e.address.toBase58();function n(){return(n=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,zt.getRecentTrades(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return D((function(){return n.apply(this,arguments)}),Object(W.a)("getBonfidaTrades",t),{refreshInterval:Jt},!1)}(),c=Object(d.a)(i,2),s=c[0],p=c[1];return Object(U.jsxs)(wn,{style:t?{flex:1}:{marginTop:"10px",minHeight:"270px",maxHeight:"calc(100vh - 700px)"},children:[Object(U.jsx)(Jr,{children:"Recent Market trades"}),Object(U.jsxs)(Hr,{children:[Object(U.jsxs)(ze.a,{span:8,children:["Price (",a,") "]}),Object(U.jsxs)(ze.a,{span:8,style:{textAlign:"right"},children:["Size (",r,")"]}),Object(U.jsx)(ze.a,{span:8,style:{textAlign:"right"},children:"Time"})]}),!!s&&p&&Object(U.jsx)("div",{style:{marginRight:"-20px",paddingRight:"5px",overflowY:"scroll",maxHeight:t?"calc(100% - 75px)":"calc(100vh - 800px)"},children:s.map((function(e,t){return Object(U.jsxs)(Re.a,{style:{marginBottom:4},children:[Object(U.jsx)(ze.a,{span:8,style:{color:"buy"===e.side?"#41C77A":"#F23B69"},children:(null===o||void 0===o?void 0:o.tickSize)&&!isNaN(e.price)?Number(e.price).toFixed(y(o.tickSize)):e.price}),Object(U.jsx)(ze.a,{span:8,style:{textAlign:"right"},children:(null===o||void 0===o?void 0:o.minOrderSize)&&!isNaN(e.size)?Number(e.size).toFixed(y(o.minOrderSize)):e.size}),Object(U.jsx)(ze.a,{span:8,style:{textAlign:"right",color:"#434a59"},children:e.time&&new Date(e.time).toLocaleTimeString()})]},t)}))})]})}var Gr=n(322),Qr=n.n(Gr),Yr=n(427),Xr=n.n(Yr),Zr=Ee.a.Title;function $r(e){var t=e.switchToLiveMarkets,n=function(){var e=mn(),t=I("customMarkets",[]),n=Object(d.a)(t,1)[0];if(!e)return null;var r=[];return e.forEach((function(e){var t=e.market,a=e.openOrdersList,o=Vt(t,n),i=o.baseCurrency,c=o.quoteCurrency,s=o.marketName;i&&c&&t&&(a||[]).forEach((function(e){var n=(null===e||void 0===e?void 0:e.baseTokenTotal)&&(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenTotal.sub(e.baseTokenFree)),a=(null===e||void 0===e?void 0:e.quoteTokenTotal)&&(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenTotal.sub(e.quoteTokenFree)),o=(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenFree),u=(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenFree);r.push({marketName:s,market:t,coin:i,key:"".concat(s).concat(i),orders:n,unsettled:o,openOrders:e}),r.push({marketName:s,market:t,coin:c,key:"".concat(s).concat(c),orders:a,unsettled:u,openOrders:e})}))})),r}(),r=function(){var e=Ie(),t=e.connected,n=e.wallet,r=Gt().customMarkets,a=Q(),o=mn(),i=o&&o.map((function(e){return e.market})),c=i&&i.filter((function(e){return!!e})).map((function(e){return e.address.toBase58()}));function s(){return s=Object(l.a)(u.a.mark((function e(){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",null);case 2:if(i){e.next=4;break}return e.abrupt("return",null);case 4:return console.log("refreshing getOpenOrdersForDeprecatedMarkets"),o=function(){var e=Object(l.a)(u.a.mark((function e(t){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return o=Vt(t,r),i=o.marketName,e.prev=3,console.log("Fetching open orders for",i),e.next=7,t.loadOrdersForOwner(a,n.publicKey);case 7:return e.abrupt("return",e.sent.map((function(e){return Object(ne.a)({marketName:i,market:t},e)})));case 10:return e.prev=10,e.t0=e.catch(3),console.log("Failed loading open orders",t.address.toBase58(),e.t0),se({message:"Error loading open orders for deprecated ".concat(i),description:e.t0.message,type:"error"}),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(i.map(o));case 8:return e.abrupt("return",e.sent.filter((function(e){return!!e})).flat());case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var p=Object(W.a)("getOpenOrdersForDeprecatedMarkets",t,a,n,c&&c.toString()),b=D((function(){return s.apply(this,arguments)}),p,{refreshInterval:Ut}),f=Object(d.a)(b,2),h=f[0],j=f[1];return console.log("openOrders",h),{openOrders:h,loaded:j,refreshOpenOrders:function(){return L(p)}}}(),a=r.openOrders,o=r.loaded,i=r.refreshOpenOrders,c=qt().refresh,s=!a||a.length>0,p=n&&n.filter((function(e){var t=e.orders,n=e.unsettled;return t>0||n>0})),b=p&&p.length>0;return Object(U.jsxs)(wn,{children:[Object(U.jsx)(Zr,{level:4,style:{color:"rgba(255, 255, 255, 1)"},children:"Migrate new markets"}),Object(U.jsx)(Ee.a,{children:"Markets on older versions of the DEX or using Wrapped USDT are now deprecated. To migrate over to the new markets, please cancel your orders and settle your funds on old markets. To convert from Wrapped USDT to Native USDT use sollet.io."}),Object(U.jsx)("div",{style:{marginTop:20,display:"flex",justifyContent:"center"},children:Object(U.jsxs)(le.a,{onClick:function(){return c(!0)},children:[Object(U.jsx)(Xr.a,{})," Refresh data"]})}),n?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(mr.a,{children:[!s&&Object(U.jsx)(Qr.a,{})," Cancel your orders"]}),s?o?Object(U.jsx)(cr,{openOrders:a,onCancelSuccess:function(){setTimeout((function(){c(),i()}),1e3)}}):Object(U.jsx)(Me.a,{size:"large"}):null,Object(U.jsxs)(mr.a,{children:[!b&&Object(U.jsx)(Qr.a,{})," Settle your funds"]}),b&&Object(U.jsx)(nr,{balances:p,hideWalletBalance:!0,showMarket:!0,onSettleSuccess:function(){setTimeout(c,1e3)}}),Object(U.jsx)(mr.a,{children:"Switch to upgraded markets"}),Object(U.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(U.jsx)(le.a,{onClick:t,disabled:b||s,children:"Switch to new markets"})})]}):Object(U.jsx)(Me.a,{size:"large"})]})}var ea=n(735),ta=n(99),na=Ee.a.Text;function ra(e){var t,n,r=e.visible,o=e.onAddCustomMarket,i=e.onClose,c=Q(),s=Object(a.useState)(""),u=Object(d.a)(s,2),l=u[0],p=u[1],f=Object(a.useState)(""),h=Object(d.a)(f,2),m=h[0],v=h[1],O=Object(a.useState)(""),x=Object(d.a)(O,2),g=x[0],y=x[1],k=Object(a.useState)(""),w=Object(d.a)(k,2),S=w[0],_=w[1],I=Object(a.useState)(null),A=Object(d.a)(I,2),T=A[0],C=A[1],P=Object(a.useState)(!1),M=Object(d.a)(P,2),E=M[0],F=M[1],B=j(l),N=Z(B?new b.PublicKey(l):null),K=Object(d.a)(N,1)[0],R=K?K.owner.toBase58():Le.MARKETS.find((function(e){return!e.deprecated})).programId.toBase58();Object(a.useEffect)((function(){B&&R?(F(!0),Le.Market.load(c,new b.PublicKey(l),{},new b.PublicKey(R)).then((function(e){C(e)})).catch((function(){z(),C(null)})).finally((function(){return F(!1)}))):z()}),[c,l,R]);var z=function(){v(null),y(null),_(null)},D=Le.MARKETS.find((function(e){return e.address.toBase58()===l&&e.programId.toBase58()===R})),L=Le.MARKETS.find((function(e){return e.programId.toBase58()===R})),q=(null===T||void 0===T?void 0:T.baseMintAddress)&&(null===(t=Le.TOKEN_MINTS.find((function(e){return e.address.equals(T.baseMintAddress)})))||void 0===t?void 0:t.name),W=(null===T||void 0===T?void 0:T.quoteMintAddress)&&(null===(n=Le.TOKEN_MINTS.find((function(e){return e.address.equals(T.quoteMintAddress)})))||void 0===n?void 0:n.name),J=!E&&!!T&&T.publicKey.toBase58()===l&&l&&R&&m&&(q||g)&&(W||S)&&B,H=function(){z(),C(null),p(null),i()};return Object(U.jsx)(ue.a,{title:"Add custom market",visible:r,onOk:function(){if(J){var e={address:l,programId:R,name:m};q||(e.baseLabel=g),W||(e.quoteLabel=S),o(e),H()}else se({message:"Please fill in all fields with valid values",type:"error"})},okText:"Add",onCancel:H,okButtonProps:{disabled:!J},children:Object(U.jsxs)("div",{children:[B?Object(U.jsxs)(U.Fragment,{children:[!T&&!E&&Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(na,{type:"danger",children:"Not a valid market"})}),T&&D&&Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsxs)(na,{type:"warning",children:["Market known: ",D.name]})}),T&&!L&&Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(na,{type:"danger",children:"Warning: unknown DEX program"})}),T&&L&&L.deprecated&&Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(na,{type:"warning",children:"Warning: deprecated DEX program"})})]}):Object(U.jsx)(U.Fragment,{children:l&&!B&&Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(na,{type:"danger",children:"Invalid market ID"})})}),Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Rr.a,{placeholder:"Market Id",value:l,onChange:function(e){return p(e.target.value)},suffix:E?Object(U.jsx)(ta.a,{}):null})})}),Object(U.jsx)(Re.a,{style:{marginBottom:8,marginTop:8},children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Rr.a,{placeholder:"Market Label",disabled:!T,value:m,onChange:function(e){return v(e.target.value)}})})}),Object(U.jsxs)(Re.a,{gutter:[8],style:{marginBottom:8},children:[Object(U.jsxs)(ze.a,{span:12,children:[Object(U.jsx)(Rr.a,{placeholder:"Base label",disabled:!T||q,value:q||g,onChange:function(e){return y(e.target.value)}}),T&&!q&&Object(U.jsx)("div",{style:{marginTop:8},children:Object(U.jsx)(na,{type:"warning",children:"Warning: unknown token"})})]}),Object(U.jsxs)(ze.a,{span:12,children:[Object(U.jsx)(Rr.a,{placeholder:"Quote label",disabled:!T||W,value:W||S,onChange:function(e){return _(e.target.value)}}),T&&!W&&Object(U.jsx)("div",{style:{marginTop:8},children:Object(U.jsx)(na,{type:"warning",children:"Warning: unknown token"})})]})]})]})})}var aa=n(325),oa=(n(705),function(){return(oa=Object.assign||function(e){for(var t,n=arguments,r=1,a=arguments.length;r<a;r++)for(var o in t=n[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)});function ia(e,t){var n=oa({},e);for(var r in t)"object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?void 0!==t[r]&&(n[r]=t[r]):n[r]=ia(e[r],t[r]);return n}var ca={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},sa={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};var ua=function(){function e(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=ia(sa,e),e.preset){var t=ca[e.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return e.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},e.prototype.headerReady=function(){var e=this;return this._innerWindowLoaded.then((function(){return e._innerWindow().headerReady()}))},e.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},e.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},e.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},e.prototype.chart=function(e){return this._innerAPI().chart(e)},e.prototype.getLanguage=function(){return this._options.locale},e.prototype.setSymbol=function(e,t,n){this._innerAPI().changeSymbol(e,t,n)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(e){this._innerAPI().saveChart(e)},e.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},e.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},e.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},e.prototype.saveChartToServer=function(e,t,n){this._innerAPI().saveChartToServer(e,t,n)},e.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},e.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},e.prototype.createButton=function(e){return this._innerWindow().createButton(e)},e.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},e.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},e.prototype.applyOverrides=function(e){this._options=ia(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},e.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},e.prototype.layoutName=function(){return this._innerAPI().layoutName()},e.prototype.changeTheme=function(e,t){this._innerWindow().changeTheme(e,t)},e.prototype.getTheme=function(){return this._innerWindow().getTheme()},e.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},e.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},e.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},e.prototype.drawOnAllCharts=function(e){this._innerAPI().drawOnAllCharts(e)},e.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},e.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},e.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},e.prototype.setIntervalLinkingEnabled=function(e){this._innerAPI().setIntervalLinkingEnabled(e)},e.prototype.setTimeFrame=function(e){this._innerAPI().setTimeFrame(e)},e.prototype.symbolSync=function(){return this._innerAPI().symbolSync()},e.prototype.intervalSync=function(){return this._innerAPI().intervalSync()},e.prototype.crosshairSync=function(){return this._innerAPI().crosshairSync()},e.prototype.timeSync=function(){return this._innerAPI().timeSync()},e.prototype.getAllFeatures=function(){return this._innerWindow().getAllFeatures()},e.prototype.clearUndoHistory=function(){return this._innerAPI().clearUndoHistory()},e.prototype.undo=function(){return this._innerAPI().undo()},e.prototype.redo=function(){return this._innerAPI().redo()},e.prototype.startFullscreen=function(){this._innerAPI().startFullscreen()},e.prototype.exitFullscreen=function(){this._innerAPI().exitFullscreen()},e.prototype.takeClientScreenshot=function(e){return this._innerAPI().takeClientScreenshot(e)},e.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},e.prototype._innerWindow=function(){return this._iFrame.contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},e.prototype._create=function(){var e=this,t=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=t,this._iFrame=n.querySelector("#"+this._id);var r=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(e){r.addEventListener("load",(function t(){r.removeEventListener("load",t,!1),e()}),!1)})),this._innerWindowLoaded.then((function(){e._innerWindow().widgetReady((function(){e._ready=!0;for(var t=0,n=e._readyHandlers;t<n.length;t++){var r=n[t];try{r.call(e)}catch(a){console.error(a)}}e._innerWindow().initializationFinished()}))}))},e.prototype._render=function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");var t=(this._options.library_path||"")+(encodeURIComponent(this._options.locale)+"-tv-chart.c3634edc.html#symbol=")+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView.version=function(){return"CL v18.044 (internal id c3634edc @ 2021-05-26T15:08:09.279Z)"};var la=["content"],da=["content"],pa="tradingviewCharts",ba="tradingviewStudies";function fa(){var e=JSON.parse(localStorage.getItem(pa))||[];return new Promise((function(t){return t(e)}))}function ha(e){var t=JSON.parse(localStorage.getItem(pa))||[];return t=t.filter((function(t){return t.id!==e})),localStorage.setItem(pa,JSON.stringify(t)),localStorage.removeItem(pa+"."+e),new Promise((function(e){return e()}))}function ja(e){var t=e.content,n=Object(re.a)(e,la);n.id||(n.id="chart"+Math.floor(1e8*Math.random())),n.timestamp=new Date-0,(t=JSON.parse(t)).content=JSON.parse(t.content);try{for(var r=0;r<t.content.charts[0].panes[0].sources.length;r++)"study_Overlay"===t.content.charts[0].panes[0].sources[r].type&&t.content.charts[0].panes[0].sources.splice(r,1)}catch(o){console.log(o)}t.content=JSON.stringify(t.content),t=JSON.stringify(t);var a=JSON.parse(localStorage.getItem(pa))||[];return(a=a.filter((function(e){return e.id!==n.id}))).push(n),localStorage.setItem(pa,JSON.stringify(a)),localStorage.setItem(pa+"."+n.id,t),new Promise((function(e){return e(n.id)}))}function ma(e){var t=localStorage.getItem(pa+"."+e);return new Promise((function(e){return e(t)}))}function va(){var e=JSON.parse(localStorage.getItem(ba))||[];return new Promise((function(t){return t(e)}))}function Oa(e){var t=e.name,n=JSON.parse(localStorage.getItem(ba))||[];return n=n.filter((function(e){return e.name!==t})),localStorage.setItem(ba,JSON.stringify(n)),localStorage.removeItem(ba+"."+t),new Promise((function(e){return e()}))}function xa(e){var t=e.content,n=Object(re.a)(e,da),r=JSON.parse(localStorage.getItem(ba))||[];return(r=r.filter((function(e){return e.name!==n.name}))).push(n),localStorage.setItem(ba,JSON.stringify(r)),localStorage.setItem(ba+"."+n.name,t),new Promise((function(e){return e()}))}function ga(e){var t=e.name,n=localStorage.getItem(ba+"."+t);return new Promise((function(e){return e(n)}))}var ya,ka=function(){var e={symbol:"BTC/USDC",interval:"60",auto_save_delay:5,theme:"Dark",containerId:"tv_chart_container",libraryPath:"/charting_library/",chartsStorageApiVersion:"1.1",clientId:"tradingview.com",userId:"public_user_id",fullscreen:!1,autosize:!0,datafeedUrl:"https://serum-api.bonfida.com/tv",studiesOverrides:{}},t=a.useRef(null),n=Zt().market,o=JSON.parse(localStorage.getItem("chartproperties")||"{}");return a.useEffect((function(){var a,i=function(e,t){var n=t.prefix,r=void 0===n?"":n,a=t.restrictTo;a&&(a=a.filter((function(t){return e.hasOwnProperty(t)})));var o={};return function e(t,n,r){(r||Object.keys(t)).forEach((function(r){var a=t[r],i=n?n+"."+r:r;a&&"object"===typeof a?e(a,i):o[i]=a}))}(e,r,a),o}(o,{restrictTo:["scalesProperties","paneProperties","tradingProperties"]}),c={symbol:(null===(a=Dt.find((function(e){return e.address.toBase58()===(null===n||void 0===n?void 0:n.publicKey.toBase58())})))||void 0===a?void 0:a.name)||"SRM/USDC",datafeed:new window.Datafeeds.UDFCompatibleDatafeed(e.datafeedUrl),interval:e.interval,container_id:e.containerId,library_path:e.libraryPath,auto_save_delay:5,locale:"en",disabled_features:["use_localstorage_for_settings"],enabled_features:["study_templates"],load_last_chart:!0,client_id:e.clientId,user_id:e.userId,fullscreen:e.fullscreen,autosize:e.autosize,studies_overrides:e.studiesOverrides,theme:"Dark"===e.theme?"Dark":"Light",overrides:Object(ne.a)(Object(ne.a)({},i),{},{"mainSeriesProperties.candleStyle.upColor":"#41C77A","mainSeriesProperties.candleStyle.downColor":"#F23B69","mainSeriesProperties.candleStyle.borderUpColor":"#41C77A","mainSeriesProperties.candleStyle.borderDownColor":"#F23B69","mainSeriesProperties.candleStyle.wickUpColor":"#41C77A","mainSeriesProperties.candleStyle.wickDownColor":"#F23B69"}),save_load_adapter:r,settings_adapter:{initialSettings:{"trading.orderPanelSettingsBroker":JSON.stringify({showRelativePriceControl:!1,showCurrencyRiskInQty:!1,showPercentRiskInQty:!1,showBracketsInCurrency:!1,showBracketsInPercent:!1}),"trading.chart.proterty":localStorage.getItem("trading.chart.proterty")||JSON.stringify({hideFloatingPanel:1}),"chart.favoriteDrawings":localStorage.getItem("chart.favoriteDrawings")||JSON.stringify([]),"chart.favoriteDrawingsPosition":localStorage.getItem("chart.favoriteDrawingsPosition")||JSON.stringify({})},setValue:function(e,t){localStorage.setItem(e,t)},removeValue:function(e){localStorage.removeItem(e)}}},s=new ua(c);s.onChartReady((function(){t.current=s,s.subscribe("onAutoSaveNeeded",(function(){return s.saveChartToServer()}))}))}),[n,t.current]),Object(U.jsx)("div",{id:e.containerId,className:"TVChartContainer"})},wa=Ke.a.Option,Sa=Ke.a.OptGroup,_a=Ce.c.div(ya||(ya=Object(Te.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"])));function Ia(){var e=Object(Ne.i)().marketAddress;Object(a.useEffect)((function(){e&&localStorage.setItem("marketAddress",JSON.stringify(e))}),[e]);var t=Object(Ne.g)();return Object(U.jsx)(Qt,{marketAddress:e,setMarketAddress:function(e){t.push(Yt(e))},children:Object(U.jsx)(Aa,{})})}function Aa(){var e=Zt(),t=e.market,n=e.marketName,r=e.customMarkets,i=e.setCustomMarkets,c=e.setMarketAddress,s=Dt.filter((function(e){var t=e.name;return!e.deprecated&&!"[]".includes(t)})),u=Object(a.useState)(!1),l=Object(d.a)(u,2),p=l[0],b=l[1],f=Object(a.useState)(!1),h=Object(d.a)(f,2),j=h[0],m=h[1],v=mn(),O=Object(a.useState)({height:window.innerHeight,width:window.innerWidth}),x=Object(d.a)(O,2),g=x[0],y=x[1];Object(a.useEffect)((function(){document.title=n?"".concat(n," \u2014 Serum"):"Serum"}),[n]);var k=Object(a.useRef)();Object(a.useEffect)((function(){var e=function(){y({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var w=null===g||void 0===g?void 0:g.width,S={onChangeOrderRef:function(e){return k.current=e},onPrice:Object(a.useCallback)((function(e){return k.current&&k.current({price:e})}),[]),onSize:Object(a.useCallback)((function(e){return k.current&&k.current({size:e})}),[])},_=p?Object(U.jsx)(Ca,{switchToLiveMarkets:function(){return b(!1)}}):w<1e3?Object(U.jsx)(Ea,Object(ne.a)({},S)):w<1450?Object(U.jsx)(Ma,Object(ne.a)({},S)):Object(U.jsx)(Pa,Object(ne.a)({},S));return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ra,{visible:j,onClose:function(){return m(!1)},onAddCustomMarket:function(e){if(vn(r).some((function(t){return t.address.toBase58()===e.address})))se({message:"A market with the given ID already exists",type:"error"});else{var t=[].concat(Object(C.a)(r),[e]);i(t),c(e.address)}}}),Object(U.jsxs)(_a,{children:[Object(U.jsxs)(Re.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16,children:[Object(U.jsx)(ze.a,{children:Object(U.jsx)(Ta,{markets:s,setHandleDeprecated:b,placeholder:"Select market",customMarkets:r,onDeleteCustomMarket:function(e){var t=r.filter((function(t){return t.address!==e}));i(t)}})}),t?Object(U.jsx)(ze.a,{children:Object(U.jsx)(De.a,{content:Object(U.jsx)(yr,{address:t.publicKey.toBase58()}),placement:"bottomRight",title:"Market address",trigger:"click",children:Object(U.jsx)(_r.a,{style:{color:"#2abdd2"}})})}):null,Object(U.jsx)(ze.a,{children:Object(U.jsx)(ea.a,{style:{color:"#2abdd2"},onClick:function(){return m(!0)}})}),v&&v.length>0&&Object(U.jsxs)(o.a.Fragment,{children:[Object(U.jsx)(ze.a,{children:Object(U.jsx)(Ee.a,{children:"You have unsettled funds on old markets! Please go through them to claim your funds."})}),Object(U.jsx)(ze.a,{children:Object(U.jsx)(le.a,{onClick:function(){return b(!p)},children:p?"View new markets":"Handle old markets"})})]})]}),_]})]})}function Ta(e){var t,n,r=e.markets,a=e.placeholder,o=e.setHandleDeprecated,i=e.customMarkets,c=e.onDeleteCustomMarket,s=Zt(),u=s.market,l=s.setMarketAddress,d=function(e){return e.split("/")[0]},p=function(e){return e.split("/")[1]},b=null===(t=vn(i).find((function(e){return(null===u||void 0===u?void 0:u.address)&&e.address.equals(u.address)})))||void 0===t||null===(n=t.address)||void 0===n?void 0:n.toBase58();return Object(U.jsxs)(Ke.a,{showSearch:!0,size:"large",style:{width:200},placeholder:a||"Select a market",optionFilterProp:"name",onSelect:function(e){o(!1),l(e)},listHeight:400,value:b,filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0},children:[i&&i.length>0&&Object(U.jsx)(Sa,{label:"Custom",children:i.map((function(e,t){var n=e.address,r=e.name;return Object(U.jsx)(wa,{value:n,name:r,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null},children:Object(U.jsxs)(Re.a,{children:[Object(U.jsx)(ze.a,{flex:"auto",children:r}),b!==n&&Object(U.jsx)(ze.a,{children:Object(U.jsx)(or.a,{onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),c&&c(n)}})})]})},Object(aa.a)())}))}),Object(U.jsx)(Sa,{label:"Markets",children:r.sort((function(e,t){return"USDT"===p(e.name)&&"USDT"!==p(t.name)?-1:"USDT"!==p(e.name)&&"USDT"===p(t.name)?1:0})).sort((function(e,t){return d(e.name)<d(t.name)?-1:d(e.name)>d(t.name)?1:0})).map((function(e,t){var n=e.address,r=e.name,a=e.deprecated;return Object(U.jsxs)(wa,{value:n.toBase58(),name:r,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null},children:[r," ",a?" (Deprecated)":null]},Object(aa.a)())}))})]})}var Ca=function(e){var t=e.switchToLiveMarkets;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Re.a,{children:Object(U.jsx)(ze.a,{flex:"auto",children:Object(U.jsx)($r,{switchToLiveMarkets:t})})})})},Pa=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return Object(U.jsxs)(Re.a,{style:{minHeight:"900px",flexWrap:"nowrap"},children:[Object(U.jsxs)(ze.a,{flex:"auto",style:{height:"50vh"},children:[Object(U.jsx)(Re.a,{style:{height:"100%"},children:Object(U.jsx)(ka,{})}),Object(U.jsx)(Re.a,{style:{height:"70%"},children:Object(U.jsx)(fr,{})})]}),Object(U.jsxs)(ze.a,{flex:"360px",style:{height:"100%"},children:[Object(U.jsx)(zn,{smallScreen:!1,onPrice:n,onSize:r}),Object(U.jsx)(Vr,{smallScreen:!1})]}),Object(U.jsxs)(ze.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(U.jsx)(Ur,{setChangeOrderRef:t}),Object(U.jsx)(Mr,{})]})]})},Ma=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Re.a,{style:{height:"30vh"},children:Object(U.jsx)(ka,{})}),Object(U.jsxs)(Re.a,{style:{height:"900px"},children:[Object(U.jsx)(ze.a,{flex:"auto",style:{height:"100%",display:"flex"},children:Object(U.jsx)(zn,{smallScreen:!0,depth:13,onPrice:n,onSize:r})}),Object(U.jsx)(ze.a,{flex:"auto",style:{height:"100%",display:"flex"},children:Object(U.jsx)(Vr,{smallScreen:!0})}),Object(U.jsxs)(ze.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(U.jsx)(Ur,{setChangeOrderRef:t}),Object(U.jsx)(Mr,{})]})]}),Object(U.jsx)(Re.a,{children:Object(U.jsx)(ze.a,{flex:"auto",children:Object(U.jsx)(fr,{})})})]})},Ea=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Re.a,{style:{height:"50vh"},children:Object(U.jsx)(ka,{})}),Object(U.jsxs)(Re.a,{children:[Object(U.jsx)(ze.a,{xs:24,sm:12,style:{height:"100%",display:"flex"},children:Object(U.jsx)(Ur,{style:{flex:1},setChangeOrderRef:t})}),Object(U.jsx)(ze.a,{xs:24,sm:12,children:Object(U.jsx)(Mr,{})})]}),Object(U.jsxs)(Re.a,{style:{height:"500px"},children:[Object(U.jsx)(ze.a,{xs:24,sm:12,style:{height:"100%",display:"flex"},children:Object(U.jsx)(zn,{smallScreen:!0,onPrice:n,onSize:r})}),Object(U.jsx)(ze.a,{xs:24,sm:12,style:{height:"100%",display:"flex"},children:Object(U.jsx)(Vr,{smallScreen:!0})})]}),Object(U.jsx)(Re.a,{children:Object(U.jsx)(ze.a,{flex:"auto",children:Object(U.jsx)(fr,{})})})]})},Fa=n(107),Ba=n(247);function Na(){var e,t=Ie(),n=t.connected,r=t.wallet,a=t.select,o=t.connect,i=t.disconnect,c=n&&(null===r||void 0===r||null===(e=r.publicKey)||void 0===e?void 0:e.toBase58())||"",s=Object(U.jsxs)(Fa.a,{children:[n&&Object(U.jsx)(yr,{shorten:!0,address:c}),Object(U.jsx)(Fa.a.Item,{onClick:a,children:"Change Wallet"},"3")]});return Object(U.jsx)(Ba.a.Button,{onClick:n?i:o,overlay:s,children:n?"Disconnect":"Connect"})}function Ka(){var e=Ie().connected,t=function(){var e=Q(),t=Ie(),n=t.connected,r=t.wallet,o=Object(a.useState)(!1),i=Object(d.a)(o,2),c=i[0],s=i[1],p=Object(a.useState)(0),b=Object(d.a)(p,2),f=b[0],h=b[1],j=Object(a.useState)(null),v=Object(d.a)(j,2),O=v[0],x=v[1],g=Object(a.useState)(0),y=Object(d.a)(g,2),k=y[0],w=y[1];return Object(a.useEffect)((function(){if(n&&r){var t=function(){var t=Object(l.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!1),n=[],a=function(){var t=Object(l.a)(u.a.mark((function t(a){var o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(1e3*Math.random());case 2:return t.prev=2,t.next=5,Le.Market.load(e,a.address,void 0,a.programId);case 5:return o=t.sent,t.next=8,o.loadOrdersForOwner(e,null===r||void 0===r?void 0:r.publicKey,3e4);case 8:i=t.sent,n.push({orders:i,marketAddress:a.address.toBase58()}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.warn("Error loading open order ".concat(a.name," - ").concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),t.next=5,Promise.all(Dt.map((function(e){return a(e)})));case 5:x(n),w((new Date).getTime()),s(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[e,n,r,f]),{openOrders:O,loaded:c,refreshOpenOrders:function(){(new Date).getTime()-k>1e4?h((function(e){return e+1})):console.log("not refreshing")}}}(),n=t.openOrders,r=t.loaded,o=t.refreshOpenOrders,i=On(),c=Object.fromEntries(i.map((function(e){return[e.address.toBase58(),e.name]}))),s=Lt(),p=Object(d.a)(s,1)[0],b=Object.fromEntries((p||[]).map((function(e){return[e.market.address.toBase58(),e.market]}))),f=(n||[]).map((function(e){return e.orders.map((function(t){return Object(ne.a)({marketName:c[e.marketAddress],market:b[e.marketAddress]},t)}))})).flat();return e?Object(U.jsxs)(wn,{style:{flex:1,paddingTop:10},children:[Object(U.jsx)(le.a,{onClick:o,loading:!r,children:"Refresh"}),Object(U.jsx)(cr,{openOrders:f,pageSize:25,loading:!r,onCancelSuccess:o,marketFilter:!0})]}):Object(U.jsx)(Re.a,{justify:"center",style:{marginTop:"10%"},children:Object(U.jsx)(Na,{})})}function Ra(e){var t=e.walletBalances,n=Q(),r=Ie(),i=r.wallet,c=r.connected,s=Xt(),p=Object(d.a)(s,1)[0],f=on(),h=Object(d.a)(f,2),j=h[0],m=h[1],v=Lt(),O=Object(d.a)(v,2),x=O[0],g=O[1],y=Object(a.useState)(!1),k=Object(d.a)(y,2),w=k[0],S=k[1];function _(){return(_=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),e.prev=1,i){e.next=5;break}return se({message:"Wallet not connected",description:"Wallet not connected",type:"error"}),e.abrupt("return");case 5:if(j&&m){e.next=8;break}return se({message:"Error settling funds",description:"TokenAccounts not connected",type:"error"}),e.abrupt("return");case 8:if(x&&g){e.next=11;break}return se({message:"Error settling funds",description:"Markets not connected",type:"error"}),e.abrupt("return");case 11:return e.next=13,Xe({connection:n,tokenAccounts:j,selectedTokenAccounts:p,wallet:i,markets:x.map((function(e){return e.market}))});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),se({message:"Error settling funds",description:e.t0.message,type:"error"});case 18:return e.prev=18,S(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})))).apply(this,arguments)}var I=[{title:"Coin",key:"coin",width:"20%",render:function(e){return Object(U.jsx)(Re.a,{align:"middle",children:Object(U.jsx)("a",{href:"https://solscan.io/address/".concat(e.mint),target:"_blank",rel:"noopener noreferrer",children:e.coin||A(new b.PublicKey(e.mint))})})}},{title:"Wallet Balance",dataIndex:"walletBalance",key:"walletBalance",width:"20%"},{title:"Open orders total balances",dataIndex:"openOrdersTotal",key:"openOrdersTotal",width:"20%"},{title:"Unsettled balances",dataIndex:"openOrdersFree",key:"openOrdersFree",width:"20%"},{title:"Selected token account",key:"selectTokenAccount",width:"20%",render:function(e){return Object(U.jsx)(Re.a,{align:"middle",style:{width:"430px"},children:Object(U.jsx)(xr,{accounts:null===j||void 0===j?void 0:j.filter((function(t){return t.effectiveMint.toBase58()===e.mint})),mint:e.mint})})}}];return Object(U.jsxs)(o.a.Fragment,{children:[Object(U.jsx)(Un,{emptyLabel:"No balances",dataSource:t,columns:I,pagination:!1}),c&&Object(U.jsx)(le.a,{onClick:function(){return _.apply(this,arguments)},loading:w,children:"Settle all funds"})]})}var za=sr.a.TabPane;function Da(){var e=function(){var e=on(),t=Object(d.a)(e,1)[0],n=Ie().connected,r=Rt(),a=Object(d.a)(r,2),o=a[0],i=a[1];if(!n||!i)return[];var c,s={},u=Object(p.a)(t||[]);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(l.account){var b=void 0;(b=l.effectiveMint.equals(We.WRAPPED_SOL_MINT)?{mint:We.WRAPPED_SOL_MINT,owner:l.pubkey,amount:l.account.lamports}:Tt(l.account.data)).mint.toBase58()in s||(s[b.mint.toBase58()]=0);var f=o&&o[b.mint.toBase58()],j=k(new h.a(b.amount),w((null===f||void 0===f?void 0:f.decimals)||0));s[b.mint.toBase58()]+=j}}}catch(m){u.e(m)}finally{u.f()}return Object.entries(s).map((function(e){var t=Object(d.a)(e,2);return{mint:t[0],balance:t[1]}}))}(),t=Kt(),n=fn(),r=(e||[]).map((function(e){var r,a={coin:t[e.mint],mint:e.mint,walletBalance:e.balance,openOrdersFree:0,openOrdersTotal:0},o=Object(p.a)(n[e.mint]||[]);try{for(o.s();!(r=o.n()).done;){var i=r.value;a.openOrdersFree+=i.free,a.openOrdersTotal+=i.total}}catch(c){o.e(c)}finally{o.f()}return a}));return Object(U.jsx)(wn,{style:{flex:1,paddingTop:10},children:Object(U.jsx)(sr.a,{defaultActiveKey:"walletBalances",children:Object(U.jsx)(za,{tab:"Wallet Balances",children:Object(U.jsx)(Ra,{walletBalances:r})},"walletBalances")})})}var La,qa,Wa,Ua=n(736),Ja=Ke.a.Option,Ha=Ee.a.Title,Va=Object(Ce.c)(le.a)(La||(La=Object(Te.a)(["\n  color: #2abdd2;\n  background-color: #212734;\n  border-width: 0px;\n"]))),Ga=Object(Ce.c)(le.a)(qa||(qa=Object(Te.a)(["\n  background: #02bf76;\n  border-color: #02bf76;\n"])));function Qa(){var e=Ie(),t=e.connected,n=e.wallet,r=Gt().customMarkets,o=vn(r),i=Object(a.useState)(null),c=Object(d.a)(i,2),s=c[0],u=c[1],l=Object(a.useState)(void 0),p=Object(d.a)(l,2),b=p[0],f=p[1],h=Object(a.useState)(void 0),j=Object(d.a)(h,2),m=j[0],v=j[1],O=Object(a.useState)(void 0),x=Object(d.a)(O,2),g=x[0],y=x[1],k=Object.fromEntries(o.map((function(e){return[e.name,e]}))),w=new Map;Object.keys(k).forEach((function(e){var t=e.split("/"),n=Object(d.a)(t,2),r=n[0],a=n[1];w.has(r)?w.set(r,new Set([].concat(Object(C.a)(w.get(r)||[]),[a]))):w.set(r,new Set([a])),w.has(a)?w.set(a,new Set([].concat(Object(C.a)(w.get(a)||[]),[r]))):w.set(a,new Set([r]))}));return Object(U.jsxs)(wn,{style:{maxWidth:500},children:[Object(U.jsx)(Ha,{level:3,children:"Convert"}),!t&&Object(U.jsx)(Re.a,{justify:"center",children:Object(U.jsx)(ze.a,{children:Object(U.jsx)(Na,{})})}),w&&t&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(ze.a,{children:Object(U.jsx)(Ke.a,{style:{minWidth:300},placeholder:"Select a token",value:b,onChange:function(e){f(e),v(void 0)},children:Array.from(w.keys()).map((function(e){return Object(U.jsx)(Ja,{value:e,children:e},e)}))})})}),b&&Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(ze.a,{children:Object(U.jsx)(Ke.a,{style:{minWidth:300},value:m,onChange:function(e){var t=o.filter((function(e){return!e.deprecated})).find((function(t){return t.name==="".concat(b,"/").concat(e)||t.name==="".concat(e,"/").concat(b)}));if(!t)return console.warn("Could not find market info for market names ".concat(b,"/").concat(e," or ").concat(e,"/").concat(b)),void se({message:"Invalid market",type:"error"});u(t.address.toBase58()),v(e)},children:Object(C.a)(w.get(b)||[]).map((function(e){return Object(U.jsx)(Ja,{value:e,children:e},e)}))})})}),b&&m&&Object(U.jsx)(Qt,{marketAddress:s,setMarketAddress:u,children:Object(U.jsx)(Ya,{size:g,setSize:y,fromToken:b,toToken:m,wallet:n,customMarkets:r})})]})]})}function Ya(e){var t=e.size,n=e.setSize,r=e.fromToken,i=e.toToken,c=e.wallet,s=e.customMarkets,p=Zt().market,b=on(),f=Object(d.a)(b,1)[0],h=jn(),j=Object(a.useState)(),m=Object(d.a)(j,2),v=m[0],O=m[1],g=Object(a.useState)(),k=Object(d.a)(g,2),w=k[0],S=k[1],_=pn().storedFeeDiscountKey,I=Q(),A=Y(),T=Object(a.useState)(!1),C=Object(d.a)(T,2),P=C[0],M=C[1],E=function(e){var t=Vt(e,s).marketName;if(!t)throw Error("Cannot determine if coin is quote or base because marketName is missing");var n=t.split("/"),a=Object(d.a)(n,1)[0];return r===a},F=function(){var e=Object(l.a)(u.a.mark((function e(){var n,r,a,o,i,s,l,b,h,j,m,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=4;break}return console.warn("Market is null when attempting convert."),se({message:"Invalid market",type:"error"}),e.abrupt("return");case 4:n=cn(f,null===p||void 0===p?void 0:p.baseMintAddress),r=cn(f,null===p||void 0===p?void 0:p.quoteMintAddress),e.prev=6,a=E(p)?"sell":"buy",e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(6),console.warn(e.t0),se({message:"Error placing order",description:e.t0.message,type:"error"}),e.abrupt("return");case 15:return o="buy"===a?p._decoded.asks:p._decoded.bids,e.next=18,I.getAccountInfo(o);case 18:if(null===(i=e.sent)||void 0===i?void 0:i.data){e.next=22;break}return se({message:"Invalid orderbook data",type:"error"}),e.abrupt("return");case 22:if(s=Le.Orderbook.decode(p,i.data),l=s&&s.getL2(1).map((function(e){return Object(d.a)(e,1)[0]})),b=Object(d.a)(l,1),b[0]){e.next=27;break}return se({message:"No best price found",type:"error"}),e.abrupt("return");case 27:if(t){e.next=30;break}return se({message:"Size not specified",type:"error"}),e.abrupt("return");case 30:if(h=y(p.tickSize),j=xn(s,t,h),m=y(p.minOrderSize),v=x("sell"===a?t:t/j,m),M(!0),e.prev=36,c){e.next=39;break}return e.abrupt("return",null);case 39:return e.next=41,rt({side:a,price:j,size:v,orderType:"ioc",market:p,connection:A,wallet:c,baseCurrencyAccount:null===n||void 0===n?void 0:n.pubkey,quoteCurrencyAccount:null===r||void 0===r?void 0:r.pubkey,feeDiscountPubkey:_});case 41:e.next=47;break;case 43:e.prev=43,e.t1=e.catch(36),console.warn(e.t1),se({message:"Error placing order",description:e.t1.message,type:"error"});case 47:return e.prev=47,M(!1),e.finish(47);case 50:case"end":return e.stop()}}),e,null,[[6,10],[36,43,47,50]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(u.a.mark((function e(){var n,r,a,o,i,c,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=E(p)?"sell":"buy",r="buy"===n?p._decoded.asks:p._decoded.bids,e.next=5,I.getAccountInfo(r);case 5:if((null===(a=e.sent)||void 0===a?void 0:a.data)&&p){e.next=8;break}return e.abrupt("return",[null,null]);case 8:if(o=Le.Orderbook.decode(p,a.data),i=o&&o.getL2(1).map((function(e){return Object(d.a)(e,1)[0]})),c=Object(d.a)(i,1),c[0]&&t){e.next=12;break}return e.abrupt("return",[null,null]);case 12:if(s=y(p.tickSize),l=gn(o,t,s),"buy"!==n){e.next=18;break}return e.abrupt("return",[l.toFixed(6),1]);case 18:return e.abrupt("return",[1,l.toFixed(6)]);case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),console.log("Got error ".concat(e.t0)),e.abrupt("return",[null,null]);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){B().then((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];O(n||void 0),S(r||void 0)}))}),[null===p||void 0===p?void 0:p.address.toBase58(),t]);var N=p&&t&&t>0,K=h.find((function(e){return e.coin===r})),R=.99*(((null===K||void 0===K?void 0:K.unsettled)||0)+((null===K||void 0===K?void 0:K.wallet)||0));return Object(U.jsxs)(o.a.Fragment,{children:[Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(ze.a,{children:Object(U.jsx)(Rr.a,{style:{minWidth:300},addonBefore:"Size (".concat(r,")"),placeholder:"Size",value:null===t?void 0:t,type:"number",onChange:function(e){return n(parseFloat(e.target.value)||void 0)}})})}),Object(U.jsxs)(Re.a,{gutter:12,style:{marginBottom:8},children:[Object(U.jsx)(ze.a,{span:12,children:Object(U.jsxs)(Va,{block:!0,size:"large",onClick:function(){return n(x(R,4))},children:["Max: ",R.toFixed(4)]})}),Object(U.jsx)(ze.a,{span:12,children:Object(U.jsx)(Ga,{block:!0,type:"primary",size:"large",loading:P,onClick:F,disabled:!N,children:"Convert"})})]}),N&&Object(U.jsxs)(Re.a,{align:"middle",justify:"center",children:[Object(U.jsxs)(ze.a,{children:[v," ",r]}),Object(U.jsx)(ze.a,{offset:1,children:Object(U.jsx)(Ua.a,{})}),Object(U.jsxs)(ze.a,{offset:1,children:[w," ",i]})]})]})}var Xa=Ce.c.div(Wa||(Wa=Object(Te.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"])));function Za(){var e=I("marketAddress",null===Ht||void 0===Ht?void 0:Ht.address.toBase58()),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(U.jsx)(Xa,{style:{flex:1,paddingTop:10},children:Object(U.jsx)(Re.a,{justify:"center",children:Object(U.jsx)(ze.a,{children:Object(U.jsx)(Qt,{marketAddress:n,setMarketAddress:r,children:Object(U.jsx)(Qa,{})})})})})}var $a=n(719),eo=n(737),to=n.p+"static/media/logo.de2794a1.svg",no=Ee.a.Paragraph;function ro(e){var t=e.autoApprove,n=function(){var e=Object(a.useContext)(Ir);if(!e)throw new Error("Missing preferences context");return{autoSettleEnabled:e.autoSettleEnabled,setAutoSettleEnabled:e.setAutoSettleEnabled}}(),r=n.autoSettleEnabled,o=n.setAutoSettleEnabled;return Object(U.jsxs)("div",{children:[Object(U.jsx)(Dr.a,{style:{marginRight:10},disabled:!t,checked:t&&r,onChange:o})," ","Auto settle",!t&&Object(U.jsx)(no,{style:{color:"rgba(255,255,255,0.5)",marginTop:10},children:"To use auto settle, first enable auto approval in your wallet"})]})}function ao(e){var t=e.visible,n=e.testingConnection,r=e.onAddCustomEndpoint,o=e.onClose,i=Object(a.useState)(""),c=Object(d.a)(i,2),s=c[0],u=c[1],l=Object(a.useState)(""),p=Object(d.a)(l,2),b=p[0],f=p[1],h=function(){u(""),f(""),o&&o()},j=""!==s&&""!==b;return Object(U.jsxs)(ue.a,{title:"Add custom endpoint",visible:t,onOk:function(){r({name:b,endpoint:"https://"+s,custom:!0}),h()},okText:"Add",onCancel:h,okButtonProps:{disabled:!j,loading:n},children:[Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Rr.a,{placeholder:"Cluster Name",value:b,onChange:function(e){return f(e.target.value)}})})}),Object(U.jsx)(Re.a,{style:{marginBottom:8},children:Object(U.jsx)(ze.a,{span:24,children:Object(U.jsx)(Rr.a,{placeholder:"Cluster Endpoint",value:s,addonBefore:"https://",onChange:function(e){return u(e.target.value)}})})})]})}var oo,io,co=n(260),so=n(428),uo=n.n(so),lo=Ke.a.Option,po=uo.a.concat(Le.TOKEN_MINTS.map((function(e){return{name:"".concat(e.name," SPL"),url:"https://solscan.io/address/".concat(e.address.toBase58()),description:"".concat(e.name," SPL token"),icon:"",tags:["token","blockchain","solana","spl","solana",e.address.toBase58()]}})));function bo(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(void 0),c=Object(d.a)(i,2),s=c[0],u=c[1],l=function(){o([]),u(void 0)},p=r.map((function(e){return Object(U.jsxs)(lo,{value:e.name,href:e.url,children:[Object(U.jsx)("h3",{children:e.name}),Object(U.jsx)(Ee.a.Text,{type:"secondary",children:e.url.replace("https://","")})]},e.name)})),b=Object(a.useRef)();return Object(U.jsx)(Ke.a,{ref:b,showSearch:!0,allowClear:!0,value:s,placeholder:e.focussed||void 0===e.focussed?"Search for dex, swap, wallet, token...":"",onSearch:function(e){u(""===e?void 0:e);var t=po.filter((function(t){return function(e,t){var n=e.toLowerCase();return t.name.toLowerCase().includes(n)||t.tags.some((function(e){return e.toLowerCase().includes(n)||n.includes(e.toLowerCase())}))}(e,t)}));o(t)},onClear:l,onSelect:function(e,t){window.open(t.href,"_blank"),l()},onFocus:e.onFocus,onBlur:function(){e.onBlur(),l()},notFoundContent:null,style:{width:e.width||"300px",transition:e.focussed?"width 0.1s ease 0.1s":""},dropdownStyle:{width:e.width||"300px"},dropdownMatchSelectWidth:!1,suffixIcon:Object(U.jsx)(co.a,{onClick:function(){return b.current&&b.current.focus()}}),filterOption:!1,children:p})}var fo=Ce.c.div(oo||(oo=Object(Te.a)(["\n  background-color: #0d1017;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n"]))),ho=Ce.c.div(io||(io=Object(Te.a)(["\n  display: flex;\n  align-items: center;\n  color: #2abdd2;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 30px;\n    margin-right: 8px;\n  }\n"]))),jo={"/learn":"https://docs.projectserum.com/trade-on-serum-dex/trade-on-serum-dex-1","/add-market":"https://serum-academy.com/en/add-market/","/wallet-support":"https://serum-academy.com/en/wallet-support","/dex-list":"https://serum-academy.com/en/dex-list/","/developer-resources":"https://serum-academy.com/en/developer-resources/","/explorer":"https://solscan.io","/srm-faq":"https://projectserum.com/srm-faq","/swap":"https://swap.projectserum.com"};function mo(){var e=Ie(),t=e.connected,n=e.wallet,r=X(),o=r.endpoint,i=r.endpointInfo,c=r.setEndpoint,s=r.availableEndpoints,u=r.setCustomEndpoints,l=Object(a.useState)(!1),p=Object(d.a)(l,2),f=p[0],h=p[1],j=Object(a.useState)(!1),m=Object(d.a)(j,2),v=m[0],O=m[1],x=Object(Ne.h)(),g=Object(Ne.g)(),y=Object(a.useState)(!1),k=Object(d.a)(y,2),w=k[0],S=k[1],_=Object(a.useCallback)((function(e){e.key in jo||g.push(e.key)}),[g]),I=i&&i.custom;Object(a.useEffect)((function(){var e=function(){I&&c(J[0].endpoint)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[I,c]);var A=x.pathname.startsWith("/market/")?x.pathname:Yt();return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ao,{visible:f,testingConnection:v,onAddCustomEndpoint:function(e){if(s.some((function(t){return t.endpoint===e.endpoint})))se({message:"An endpoint with the given url already exists",type:"error"});else{var t=function(t){console.log("Connection to ".concat(e.endpoint," failed: ").concat(t)),se({message:"Failed to connect to ".concat(e.endpoint),type:"error"})};try{new b.Connection(e.endpoint,"recent").getBlockTime(0).then((function(){O(!0),console.log("testing connection to ".concat(e.endpoint));var t=[].concat(Object(C.a)(s.filter((function(e){return e.custom}))),[e]);c(e.endpoint),u(t)})).catch(t)}catch(n){t(n)}finally{O(!1)}}},onClose:function(){return h(!1)}}),Object(U.jsxs)(fo,{children:[Object(U.jsxs)(ho,{onClick:function(){return g.push(A)},children:[Object(U.jsx)("img",{src:to,alt:""}),"SERUM"]}),Object(U.jsxs)(Fa.a,{mode:"horizontal",onClick:_,selectedKeys:[x.pathname],style:{borderBottom:"none",backgroundColor:"transparent",display:"flex",alignItems:"flex-end",flex:1},children:[Object(U.jsx)(Fa.a.Item,{style:{margin:"0 10px 0 20px"},children:"TRADE"},A),!w&&Object(U.jsx)(Fa.a.Item,{style:{margin:"0 10px"},children:Object(U.jsx)("a",{href:jo["/swap"],target:"_blank",rel:"noopener noreferrer",children:"SWAP"})},"/swap"),t&&(!w||"/balances"===x.pathname)&&Object(U.jsx)(Fa.a.Item,{style:{margin:"0 10px"},children:"BALANCES"},"/balances"),t&&(!w||"/orders"===x.pathname)&&Object(U.jsx)(Fa.a.Item,{style:{margin:"0 10px"},children:"ORDERS"},"/orders"),t&&(!w||"/convert"===x.pathname)&&Object(U.jsx)(Fa.a.Item,{style:{margin:"0 10px"},children:"CONVERT"},"/convert"),(!w||"/list-new-market"===x.pathname)&&Object(U.jsx)(Fa.a.Item,{style:{margin:"0 10px"},children:"ADD MARKET"},"/list-new-market"),!w&&Object(U.jsxs)(Fa.a.SubMenu,{title:"LEARN",onTitleClick:function(){return window.open(jo["/learn"],"_blank")},style:{margin:"0 0px 0 10px"},children:[Object(U.jsx)(Fa.a.Item,{children:Object(U.jsx)("a",{href:jo["/add-market"],target:"_blank",rel:"noopener noreferrer",children:"Adding a market"})},"/add-market"),Object(U.jsx)(Fa.a.Item,{children:Object(U.jsx)("a",{href:jo["/wallet-support"],target:"_blank",rel:"noopener noreferrer",children:"Supported wallets"})},"/wallet-support"),Object(U.jsx)(Fa.a.Item,{children:Object(U.jsx)("a",{href:jo["/dex-list"],target:"_blank",rel:"noopener noreferrer",children:"DEX list"})},"/dex-list"),Object(U.jsx)(Fa.a.Item,{children:Object(U.jsx)("a",{href:jo["/developer-resources"],target:"_blank",rel:"noopener noreferrer",children:"Developer resources"})},"/developer-resources"),Object(U.jsx)(Fa.a.Item,{children:Object(U.jsx)("a",{href:jo["/explorer"],target:"_blank",rel:"noopener noreferrer",children:"Solana block explorer"})},"/explorer"),Object(U.jsx)(Fa.a.Item,{children:Object(U.jsx)("a",{href:jo["/srm-faq"],target:"_blank",rel:"noopener noreferrer",children:"SRM FAQ"})},"/srm-faq")]})]}),Object(U.jsx)("div",{style:{display:"flex",alignItems:"center",paddingRight:5},children:Object(U.jsx)(bo,{onFocus:function(){return S(!0)},onBlur:function(){return S(!1)},focussed:w,width:w?"350px":"35px"})}),Object(U.jsx)("div",{children:Object(U.jsxs)(Re.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16,children:[Object(U.jsx)(ze.a,{children:Object(U.jsx)(ea.a,{style:{color:"#2abdd2"},onClick:function(){return h(!0)}})}),Object(U.jsx)(ze.a,{children:Object(U.jsx)(De.a,{content:o,placement:"bottomRight",title:"URL",trigger:"hover",children:Object(U.jsx)(_r.a,{style:{color:"#2abdd2"}})})}),Object(U.jsx)(ze.a,{children:Object(U.jsx)(Ke.a,{onSelect:c,value:o,style:{marginRight:8,width:"150px"},children:s.map((function(e){var t=e.name,n=e.endpoint;return Object(U.jsx)(Ke.a.Option,{value:n,children:t},n)}))})})]})}),t&&Object(U.jsx)("div",{children:Object(U.jsx)(De.a,{content:Object(U.jsx)(ro,{autoApprove:null===n||void 0===n?void 0:n.autoApprove}),placement:"bottomRight",title:"Settings",trigger:"click",children:Object(U.jsxs)(le.a,{style:{marginRight:8},children:[Object(U.jsx)(eo.a,{}),"Settings"]})})}),Object(U.jsx)("div",{children:Object(U.jsx)(Na,{})})]})]})}var vo=n(409),Oo="https://discord.gg/EDvudv6",xo="https://t.me/ProjectSerum",go="https://github.com/project-serum",yo="https://projectserum.com/",ko="https://projectserum.com/developer-resources",wo="https://solanabeach.io",So=$a.a.Footer,_o=vo.a.useBreakpoint,Io=[{description:"Serum Developer Resources",link:ko},{description:"Discord",link:Oo},{description:"Telegram",link:xo},{description:"GitHub",link:go},{description:"Project Serum",link:yo},{description:"Solana Network",link:wo}],Ao=function(){var e=!_o().lg,t=tr(),n=t.refCode,r=t.allowRefLink;return Object(U.jsxs)(So,{style:{height:"55px",paddingBottom:10,paddingTop:10},children:[n&&r&&Object(U.jsxs)(Re.a,{justify:"center",children:["Your referrer is ",n]}),Object(U.jsxs)(Re.a,{align:"middle",gutter:[16,4],children:[!e&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ze.a,{flex:"auto"}),Io.map((function(e,t){return Object(U.jsx)(ze.a,{children:Object(U.jsx)(ce,{external:!0,to:e.link,children:e.description})},t+"")}))]}),Object(U.jsx)(ze.a,{flex:"auto"})]})]})},To=n(429),Co=n.n(To),Po=$a.a.Header,Mo=$a.a.Content;function Eo(e){var t=e.children,n=tr(),r=n.refCode,i=n.setRefCode,c=n.allowRefLink,s=Object(Ne.h)().search,u=Co.a.parse(s);return Object(a.useEffect)((function(){u.refCode&&u.refCode!==r&&c&&(se({message:"New referrer ".concat(u.refCode," added")}),i(u.refCode))}),[u,r,i,c]),Object(U.jsx)(o.a.Fragment,{children:Object(U.jsxs)($a.a,{style:{display:"flex",minHeight:"100vh",flexDirection:"column"},children:[Object(U.jsx)(Po,{style:{padding:0,minHeight:64,height:"unset"},children:Object(U.jsx)(mo,{})}),Object(U.jsx)(Mo,{style:{flex:1},children:t}),Object(U.jsx)(Ao,{})]})})}var Fo,Bo=n(723),No=n(75),Ko=n(720);function Ro(e,t,n){var r=Object(a.useState)(""),o=Object(d.a)(r,2),i=o[0],c=o[1],s=Z(j(i)?new b.PublicKey(i):null),u=Object(d.a)(s,2),l=u[0],p=u[1],f=Kt(),h=Object(a.useMemo)((function(){return Object.entries(f).filter((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return n.includes(i)||r.toLowerCase().includes(i.toLowerCase())})).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return{value:n,label:Object(U.jsxs)(U.Fragment,{children:[r," (",n,")"]})}}))}),[f,i]),m=Object(a.useMemo)((function(){var e="",t=!1,n=null,r=null;if(i)if(t=!0,l)if(l.owner.equals(Le.TokenInstructions.TOKEN_PROGRAM_ID)&&82===l.data.length){var a=Ct(l.data);a.initialized?(e="success",r={address:new b.PublicKey(i),decimals:a.decimals}):(e="error",n="Invalid SPL mint")}else e="error",n="Invalid SPL mint address";else j(i)&&!p?e="validating":(e="error",n="Invalid Solana address");return{validateStatus:e,hasFeedback:t,help:n,mintInfo:r}}),[i,l,p]),v=m.validateStatus,O=m.hasFeedback,x=m.help,g=m.mintInfo;return[Object(U.jsx)(Bo.a.Item,{label:Object(U.jsx)(No.a,{title:Object(U.jsxs)(U.Fragment,{children:[n," You can look up token mint addresses on"," ",Object(U.jsx)(ce,{external:!0,to:"https://sollet.io",children:"sollet.io"}),"."]}),children:t}),name:e,validateStatus:v,hasFeedback:O,help:x,children:Object(U.jsx)(Ko.a,{options:h,value:i,onChange:function(e){return c(e)}})}),g]}var zo=Ee.a.Text,Do=Ee.a.Title,Lo=Ce.c.div(Fo||(Fo=Object(Te.a)(["\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"])));function qo(){var e,t,n=Q(),r=Ie(),o=r.wallet,i=r.connected,c=Ro("baseMint",Object(U.jsxs)(zo,{children:["Base Token Mint Address"," ",Object(U.jsxs)(zo,{type:"secondary",children:["(e.g. BTC solana address:"," ",Object(U.jsx)(zo,{type:"secondary",code:!0,children:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E"}),")"]})]}),"The base token is the token being traded. For example, the base token of a BTC/USDT market is BTC."),s=Object(d.a)(c,2),p=s[0],b=s[1],f=Ro("quoteMint",Object(U.jsxs)(zo,{children:["Quote Token Mint Address"," ",Object(U.jsxs)(zo,{type:"secondary",children:["(e.g. USDT solana address:"," ",Object(U.jsx)(zo,{type:"secondary",code:!0,children:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4"}),")"]})]}),"The quote token is the token used to price trades. For example, the quote token of a BTC/USDT market is USDT."),h=Object(d.a)(f,2),j=h[0],m=h[1],v=Object(a.useState)("1"),O=Object(d.a)(v,2),x=O[0],g=O[1],y=Object(a.useState)("0.01"),k=Object(d.a)(y,2),w=k[0],S=k[1],_=Le.MARKETS.find((function(e){return!e.deprecated})).programId,I=Object(a.useState)(!1),A=Object(d.a)(I,2),T=A[0],C=A[1],P=Object(a.useState)(null),M=Object(d.a)(P,2),E=M[0],F=M[1];b&&parseFloat(x)>0&&(e=Math.round(Math.pow(10,b.decimals)*parseFloat(x)),m&&parseFloat(w)>0&&(t=Math.round(parseFloat(x)*Math.pow(10,m.decimals)*parseFloat(w))));var B=i&&!!b&&!!m&&!!e&&!!t;function N(){return(N=Object(l.a)(u.a.mark((function r(){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(B){r.next=2;break}return r.abrupt("return");case 2:return C(!0),r.prev=3,r.next=6,ot({connection:n,wallet:o,baseMint:b.address,quoteMint:m.address,baseLotSize:e,quoteLotSize:t,dexProgramId:_});case 6:a=r.sent,F(a),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(3),console.warn(r.t0),se({message:"Error listing new market",description:r.t0.message,type:"error"});case 14:return r.prev=14,C(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))).apply(this,arguments)}return Object(U.jsxs)(Lo,{children:[Object(U.jsxs)(wn,{children:[Object(U.jsx)(Do,{level:4,children:"List New Market"}),Object(U.jsxs)(Bo.a,{labelCol:{span:24},wrapperCol:{span:24},layout:"vertical",onFinish:function(){return N.apply(this,arguments)},children:[p,j,Object(U.jsx)(Bo.a.Item,{label:Object(U.jsxs)(No.a,{title:"Smallest allowed order size. For a BTC/USDT market, this would be in units of BTC.",children:["Minimum Order Size"," ",Object(U.jsx)(zo,{type:"secondary",children:"(Lot size in e.g. BTC)"})]}),name:"lotSize",initialValue:"1",validateStatus:b&&m?e?"success":"error":null,hasFeedback:b&&m,children:Object(U.jsx)(Rr.a,{value:x,onChange:function(e){return g(e.target.value.trim())},type:"number",min:"0",step:"any"})}),Object(U.jsx)(Bo.a.Item,{label:Object(U.jsxs)(No.a,{title:"Smallest amount by which prices can move. For a BTC/USDT market, this would be in units of USDT.",children:["Tick Size"," ",Object(U.jsx)(zo,{type:"secondary",children:"(Price increment in e.g. USDT)"})]}),name:"tickSize",initialValue:"0.01",validateStatus:b&&m?t?"success":"error":null,hasFeedback:b&&m,children:Object(U.jsx)(Rr.a,{value:w,onChange:function(e){return S(e.target.value.trim())},type:"number",min:"0",step:"any"})}),Object(U.jsx)(Bo.a.Item,{label:" ",colon:!1,children:Object(U.jsx)(le.a,{type:"primary",htmlType:"submit",disabled:!B,loading:T,children:i?"Submit":"Not connected to wallet"})})]})]}),E?Object(U.jsx)(wn,{children:Object(U.jsxs)(zo,{children:["New market address: ",E.toBase58()]})}):null]})}var Wo,Uo,Jo=n(64),Ho=Ee.a.Text,Vo=Ee.a.Title,Go=Ce.c.div(Wo||(Wo=Object(Te.a)(["\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]))),Qo=Ce.c.div(Uo||(Uo=Object(Te.a)(["\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]))),Yo="71JS8f7y7ASMbuuSMCVG7a3qDdcVco2qYD6bMJeZqUCm",Xo="WvmTNLpGMVbwJVYztYL4Hnsy82cJhQorxjnnXcRm3b6",Zo=Xo,$o=[{label:"Simple Pool (".concat(Yo,")"),value:Yo},{label:"Admin-Controlled Pool (".concat(Xo,")"),value:Xo}];function ei(){var e=Q(),t=Ie(),n=t.wallet,r=t.connected,o=Object(a.useState)(""),i=Object(d.a)(o,2),c=i[0],s=i[1],f=Object(a.useState)(Zo),j=Object(d.a)(f,2),m=j[0],v=j[1],O=Object(a.useState)("1"),x=Object(d.a)(O,2),g=x[0],y=x[1],k=Object(a.useState)([{valid:!1},{valid:!1}]),w=Object(d.a)(k,2),S=w[0],_=w[1],I=Object(a.useState)(!1),A=Object(d.a)(I,2),T=A[0],C=A[1],P=Object(a.useState)(""),M=Object(d.a)(P,2),E=M[0],F=M[1],B=on(),N=Object(d.a)(B,1)[0],K=Object(a.useState)(!1),R=Object(d.a)(K,2),z=R[0],D=R[1],L=Object(a.useState)(null),q=Object(d.a)(L,2),W=q[0],J=q[1];Object(a.useEffect)((function(){m===Yo?C(!1):m===Xo&&C(!0)}),[m]),Object(a.useEffect)((function(){r&&n&&F(n.publicKey.toBase58())}),[n,r]);var H=r&&c.trim()&&m&&parseFloat(g)>0&&S.every((function(e){return e.valid}))&&N&&(E||!T);function V(){return(V=Object(l.a)(u.a.mark((function t(){var r,a,o,i,s,l,f,j,v;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(H&&n){t.next=2;break}return t.abrupt("return");case 2:return D(!0),t.prev=3,r=S,t.next=7,Jo.PoolTransactions.initializeSimplePool({connection:e,programId:new b.PublicKey(m),poolName:c,poolStateSpace:1024,poolMintDecimals:6,initialPoolMintSupply:new h.a(Math.round(Math.pow(10,6)*parseFloat(g))),assetMints:r.map((function(e){return e.mint})),initialAssetQuantities:r.map((function(e){return new h.a(e.quantity)})),creator:n.publicKey,creatorAssets:r.map((function(e){var t=null===N||void 0===N?void 0:N.find((function(t){return t.effectiveMint.equals(e.mint)}));if(!t)throw new Error("No token account for "+e.mint.toBase58());return t.pubkey})),additionalAccounts:T?[{pubkey:new b.PublicKey(E),isSigner:!1,isWritable:!1}]:[]});case 7:return a=t.sent,o=Object(d.a)(a,2),i=o[0],s=o[1],t.next=13,bt({transactionsAndSigners:s,wallet:n,connection:e});case 13:l=t.sent,f=Object(p.a)(l),t.prev=15,f.s();case 17:if((j=f.n()).done){t.next=23;break}return v=j.value,t.next=21,ht({signedTransaction:v,connection:e});case 21:t.next=17;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(15),f.e(t.t0);case 28:return t.prev=28,f.f(),t.finish(28);case 31:J(i),t.next=38;break;case 34:t.prev=34,t.t1=t.catch(3),console.warn(t.t1),se({message:"Error creating new pool",description:t.t1.message,type:"error"});case 38:return t.prev=38,D(!1),t.finish(38);case 41:case"end":return t.stop()}}),t,null,[[3,34,38,41],[15,25,28,31]])})))).apply(this,arguments)}return Object(U.jsxs)(Go,{children:[Object(U.jsxs)(wn,{children:[Object(U.jsx)(Vo,{level:4,children:"Create new pool"}),Object(U.jsxs)(Bo.a,{layout:"vertical",onFinish:function(){return V.apply(this,arguments)},children:[Object(U.jsx)(Bo.a.Item,{label:Object(U.jsx)(No.a,{title:"Public name of the pool.",children:"Pool Name"}),name:"name",children:Object(U.jsx)(Rr.a,{value:c,onChange:function(e){return s(e.target.value)}})}),Object(U.jsx)(Bo.a.Item,{label:Object(U.jsxs)(No.a,{title:"Address of the pool program.",children:["Program ID"," ",Object(U.jsxs)(Ho,{type:"secondary",children:["(e.g. ",Zo,")"]})]}),name:"programId",initialValue:Zo,children:Object(U.jsx)(Ko.a,{value:m,onChange:function(e){return v(e)},options:$o})}),Object(U.jsx)(Bo.a.Item,{label:Object(U.jsx)(No.a,{title:"Initial number of pool tokens to mint to your account.",children:"Initial Pool Token Supply"}),name:"initialSupply",initialValue:"1",children:Object(U.jsx)(Rr.a,{value:g,onChange:function(e){return y(e.target.value.trim())},type:"number",min:"0",step:"any"})}),Object(U.jsxs)(Qo,{children:[Object(U.jsx)(le.a,{onClick:function(){return _((function(e){return e.concat({valid:!1})}))},children:"Add token"})," ",Object(U.jsx)(le.a,{onClick:function(){return _((function(e){return e.slice(0,e.length-1)}))},disabled:S.length<=1,children:"Remove token"})]}),S.map((function(e,t){return Object(U.jsx)(ti,{setInitialAssets:_,index:t},t)})),Object(U.jsx)(Bo.a.Item,{label:Object(U.jsx)(No.a,{title:"Whether the assets in the pool can be controlled by the pool admin.",children:"Admin Controlled"}),name:"adminControlled",children:Object(U.jsx)(Dr.a,{checked:T,onChange:function(e){return C(e)},disabled:m===Yo||m===Xo})}),T?Object(U.jsx)(Bo.a.Item,{label:Object(U.jsx)(No.a,{title:"Address of the pool admin account.",children:"Admin Address"}),children:Object(U.jsx)(Rr.a,{value:E,onChange:function(e){return F(e.target.value.trim())}})}):null,Object(U.jsx)(Bo.a.Item,{label:" ",colon:!1,children:Object(U.jsx)(le.a,{type:"primary",htmlType:"submit",disabled:!H,loading:z,children:r?"Submit":"Not connected to wallet"})})]})]}),W?Object(U.jsx)(wn,{children:Object(U.jsxs)(Ho,{children:["New pool address:"," ",Object(U.jsx)(ce,{to:"/pools/".concat(W.toBase58()),children:W.toBase58()})]})}):null]})}function ti(e){var t=e.setInitialAssets,n=e.index,r=Ro("mint".concat(n),Object(U.jsxs)(Ho,{children:["Token ",n+1," Mint Address"]}),Object(U.jsxs)(U.Fragment,{children:["Token mint address for token ",n+1,"."]})),o=Object(d.a)(r,2),i=o[0],c=o[1],s=Object(a.useState)(""),u=Object(d.a)(s,2),l=u[0],p=u[1];return Object(a.useEffect)((function(){var e;if(c&&parseFloat(l)>=0){var r=Math.round(Math.pow(10,c.decimals)*parseFloat(l));e={mint:c.address,quantity:r,valid:!0}}else e={valid:!1};t((function(t){return t.map((function(t,r){return r===n?e:t}))}))}),[t,n,c,l]),Object(U.jsxs)(U.Fragment,{children:[i,Object(U.jsx)(Bo.a.Item,{label:Object(U.jsxs)(No.a,{title:Object(U.jsxs)(U.Fragment,{children:["Initial quantity of token ",n+1," to deposit into the pool."]}),children:["Token ",n+1," Initial Quantity"]}),name:"quantity".concat(n),validateStatus:"success",children:Object(U.jsx)(Rr.a,{value:l,onChange:function(e){return p(e.target.value.trim())},type:"number",min:"0",step:"any"})})]})}var ni=n(726);function ri(e){var t,n=e.mint,r=e.showAddress,a=void 0!==r&&r,o=Kt();if(!n)return null;var i="string"===typeof n?new b.PublicKey(n):n,c="string"===typeof n?n:n.toBase58(),s=null!==(t=o[c])&&void 0!==t?t:A(i);return Object(U.jsxs)(U.Fragment,{children:[s,a?Object(U.jsxs)(U.Fragment,{children:[" ",Object(U.jsx)(De.a,{content:Object(U.jsx)(yr,{address:c}),placement:"bottomRight",title:"Token mint",trigger:"hover",children:Object(U.jsx)(_r.a,{style:{color:"#2abdd2"}})})]}):null]})}function ai(e){var t=e.poolInfo,n=e.basket;return Object(U.jsx)("ul",{children:t.state.assets.map((function(e,t){return Object(U.jsx)(oi,{mint:e.mint,quantity:null===n||void 0===n?void 0:n.quantities[t]},t)}))})}function oi(e){var t=e.mint,n=e.quantity,r=Z(t),a=Object(d.a)(r,1)[0],o=Object(U.jsx)(Me.a,{size:"small"});if(a&&n){var i=Ct(a.data);o=Object(U.jsx)(U.Fragment,{children:n.toNumber()/Math.pow(10,i.decimals)})}return Object(U.jsxs)("li",{children:[o," ",Object(U.jsx)(ri,{mint:t,showAddress:!0})]})}var ii=Ee.a.Text,ci=Ee.a.Paragraph,si=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:6});function ui(e){var t=e.poolInfo,n=e.mintInfo,r=Q(),a=D((function(){return Object(Jo.getPoolBasket)(r,t,{redeem:n.supply})}),Object(W.a)(Jo.getPoolBasket,r,t,"total",n)),o=Object(d.a)(a,1)[0];return Object(U.jsxs)(wn,{stretchVertical:!0,children:[Object(U.jsxs)(ci,{children:["Name: ",t.state.name]}),Object(U.jsxs)(ci,{children:["Address: ",Object(U.jsx)(ii,{copyable:!0,children:t.address.toBase58()})]}),Object(U.jsxs)(ci,{children:["Pool token mint address:"," ",Object(U.jsx)(ii,{copyable:!0,children:t.state.poolTokenMint.toBase58()})]}),t.state.adminKey?Object(U.jsxs)(ci,{children:["Pool admin: ",Object(U.jsx)(ii,{copyable:!0,children:t.state.adminKey.toBase58()})]}):null,Object(U.jsxs)(ci,{children:["Fee rate: ",si.format(t.state.feeRate/1e6)]}),Object(U.jsxs)(ci,{children:["Total supply: ",n.supply.toNumber()/Math.pow(10,n.decimals)]}),Object(U.jsx)(ii,{children:"Total assets:"}),Object(U.jsx)("div",{children:Object(U.jsx)(ai,{poolInfo:t,basket:o})})]})}var li=Ee.a.Text,di=sr.a.TabPane;function pi(e){var t=e.poolInfo,n=e.mintInfo;return Object(U.jsx)(wn,{stretchVertical:!0,children:Object(U.jsxs)(sr.a,{children:[Object(U.jsx)(di,{tab:"Create",children:Object(U.jsx)(bi,{poolInfo:t,mintInfo:n,tab:"create"})},"create"),Object(U.jsx)(di,{tab:"Redeem",children:Object(U.jsx)(bi,{poolInfo:t,mintInfo:n,tab:"redeem"})},"redeem")]})})}function bi(e){var t=e.poolInfo,n=e.mintInfo,r=e.tab,o=Q(),i=Ie(),c=i.wallet,s=i.connected,p=Object(a.useState)(""),b=Object(d.a)(p,2),f=b[0],j=b[1],m=on(),v=Object(d.a)(m,1)[0],O=Object(a.useState)(!1),x=Object(d.a)(O,2),g=x[0],y=x[1],k=Object(a.useMemo)((function(){var e=Math.round(parseFloat(f)*Math.pow(10,n.decimals));return e>0?"create"===r?{create:new h.a(e)}:{redeem:new h.a(e)}:null}),[n.decimals,f,r]),w=D(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=6;break}return e.next=3,Object(Jo.getPoolBasket)(o,t,k);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)}))),Object(W.a)(Jo.getPoolBasket,o,t.address.toBase58(),k)),S=Object(d.a)(w,2),_=S[0],I=S[1];function A(e){var t=null===v||void 0===v?void 0:v.find((function(t){return t.effectiveMint.equals(e)}));if(t)return t.pubkey;throw new Error("No token account for "+e.toBase58())}var T=s&&k&&_;function C(){return(C=Object(l.a)(u.a.mark((function e(n){var a,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),k&&_&&s&&T&&c){e.next=3;break}return e.abrupt("return");case 3:return y(!0),e.prev=4,a=Jo.PoolTransactions.execute(t,k,{owner:c.publicKey,poolTokenAccount:A(t.state.poolTokenMint),assetAccounts:t.state.assets.map((function(e){return A(e.mint)}))},_),i=a.transaction,l=a.signers,e.next=8,ut({connection:o,wallet:c,transaction:i,signers:l});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.warn(e.t0),se({message:"Error "+("create"===r?"creating":"redeeming")+" pool tokens",description:e.t0.message,type:"error"});case 14:return e.prev=14,y(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,10,14,17]])})))).apply(this,arguments)}return Object(U.jsxs)("form",{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(U.jsx)(Rr.a,{addonBefore:Object(U.jsx)(U.Fragment,{children:"Quantity"}),value:f,onChange:function(e){return j(e.target.value.trim())},style:{marginBottom:24}}),Object(U.jsx)("div",{children:_?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(li,{children:["create"===r?"Cost":"Proceeds",": "]}),Object(U.jsx)(li,{type:"secondary",children:"(indicative only)"}),Object(U.jsx)(ai,{poolInfo:t,basket:_})]}):I?null:Object(U.jsx)(Me.a,{})}),Object(U.jsx)(le.a,{htmlType:"submit",type:"primary",disabled:!T||g,children:s?"Submit":"Wallet not connected"})]})}var fi=sr.a.TabPane;function hi(e){var t=e.poolInfo;return Object(U.jsx)(wn,{children:Object(U.jsxs)(sr.a,{children:[Object(U.jsx)(fi,{tab:"Wallet Balances",children:Object(U.jsx)(ji,{poolInfo:t})},"wallet"),Object(U.jsx)(fi,{tab:"Pool Balances",children:Object(U.jsx)(mi,{poolInfo:t})},"pool")]})})}function ji(e){var t=e.poolInfo,n=on(),r=Object(d.a)(n,1)[0];return Object(U.jsx)("ul",{children:[t.state.poolTokenMint].concat(Object(C.a)(t.state.assets.map((function(e){return e.mint})))).map((function(e,n){var a=null===r||void 0===r?void 0:r.find((function(t){return t.effectiveMint.equals(e)}));return a?Object(U.jsx)(vi,{mint:e,publicKey:a.pubkey,isPoolToken:e.equals(t.state.poolTokenMint)},n):null}))})}function mi(e){var t=e.poolInfo;return Object(U.jsx)("ul",{children:t.state.assets.map((function(e,t){return Object(U.jsx)(vi,{mint:e.mint,publicKey:e.vaultAddress},t)}))})}function vi(e){var t=e.mint,n=e.publicKey,r=e.isPoolToken,a=Z(t),o=Object(d.a)(a,1)[0],i=Z(n),c=Object(d.a)(i,1)[0],s=Object(U.jsx)(Me.a,{size:"small"});if(o&&c){var u=Ct(o.data);if(t.equals(We.WRAPPED_SOL_MINT))s=Object(U.jsx)(U.Fragment,{children:c.lamports/Math.pow(10,u.decimals)});else{var l=Tt(c.data);s=Object(U.jsx)(U.Fragment,{children:l.amount/Math.pow(10,u.decimals)})}}return Object(U.jsxs)("li",{children:[s," ",r?Object(U.jsxs)(U.Fragment,{children:["Pool Token (",Object(U.jsx)(ri,{mint:t}),")"]}):Object(U.jsx)(ri,{mint:t})," ",Object(U.jsx)(le.a,{type:"link",icon:Object(U.jsx)(gr.a,{}),href:"https://solscan.io/address/"+n.toBase58(),target:"_blank",rel:"noopener noreferrer"})]})}var Oi=n(323),xi=sr.a.TabPane,gi=Ke.a.Option;function yi(e){var t=e.poolInfo;return Object(U.jsx)(wn,{children:Object(U.jsxs)(sr.a,{children:[Object(U.jsx)(xi,{tab:"Pause/Unpause",children:Object(U.jsx)(ki,{poolInfo:t})},"pause"),Object(U.jsx)(xi,{tab:"Add Token",children:Object(U.jsx)(wi,{poolInfo:t})},"addAsset"),Object(U.jsx)(xi,{tab:"Remove Token",children:Object(U.jsx)(Si,{poolInfo:t})},"removeAsset"),Object(U.jsx)(xi,{tab:"Deposit",children:Object(U.jsx)(_i,{poolInfo:t})},"deposit"),Object(U.jsx)(xi,{tab:"Withdraw",children:Object(U.jsx)(Ii,{poolInfo:t})},"withdraw"),Object(U.jsx)(xi,{tab:"Modify Fee",children:Object(U.jsx)(Ai,{poolInfo:t})},"updateFee")]})})}function ki(e){var t=e.poolInfo,n=Q(),r=Ie(),o=r.wallet,i=r.connected,c=Object(a.useState)(!1),s=Object(d.a)(c,2),p=s[0],f=s[1];function h(){return(h=Object(l.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&o){e.next=2;break}return e.abrupt("return");case 2:return f(!0),e.prev=3,(r=new b.Transaction).add(Jo.AdminControlledPoolInstructions.pause(t)),e.next=8,ut({connection:n,wallet:o,transaction:r});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),se({message:"Error pausing pool",description:e.t0.message,type:"error"});case 13:return e.prev=13,f(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))).apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&o){e.next=2;break}return e.abrupt("return");case 2:return f(!0),e.prev=3,(r=new b.Transaction).add(Jo.AdminControlledPoolInstructions.unpause(t)),e.next=8,ut({connection:n,wallet:o,transaction:r});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),se({message:"Error unpausing pool",description:e.t0.message,type:"error"});case 13:return e.prev=13,f(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))).apply(this,arguments)}return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(le.a,{onClick:function(){return h.apply(this,arguments)},disabled:p,children:"Pause"})," ",Object(U.jsx)(le.a,{onClick:function(){return j.apply(this,arguments)},disabled:p,children:"Unpause"})]})}function wi(e){var t=e.poolInfo,n=Q(),r=Object(a.useState)(""),o=Object(d.a)(r,2),i=o[0],c=o[1],s=Ie(),p=s.wallet,f=s.connected&&i,h=Ti("adding asset to pool",Object(l.a)(u.a.mark((function e(){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new b.PublicKey(i),e.next=3,Object(Oi.getAssociatedTokenAddress)(t.state.vaultSigner,r);case 3:return a=e.sent,o=new b.Transaction,e.next=7,n.getAccountInfo(a);case 7:if(e.t0=!e.sent,!e.t0){e.next=10;break}e.t0=p;case 10:if(!e.t0){e.next=16;break}return e.t1=o,e.next=14,Object(Oi.createAssociatedTokenAccount)(p.publicKey,t.state.vaultSigner,r);case 14:e.t2=e.sent,e.t1.add.call(e.t1,e.t2);case 16:return o.add(Jo.AdminControlledPoolInstructions.addAsset(t,a)),e.abrupt("return",[o,[]]);case 18:case"end":return e.stop()}}),e)})))),j=Object(d.a)(h,2),m=j[0],v=j[1];return Object(U.jsxs)("form",{onSubmit:m,children:[Object(U.jsx)(Mi,{label:"Token Mint Address",value:i,onChange:function(e){return c(e)},style:{marginBottom:24}}),Object(U.jsx)(Ci,{canSubmit:f,submitting:v})]})}function Si(e){var t=e.poolInfo,n=Object(a.useState)(""),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Ie().connected&&o,s=Ti("removing asset from pool",Object(l.a)(u.a.mark((function e(){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new b.PublicKey(o),a=null===(n=t.state.assets.find((function(e){return e.mint.equals(r)})))||void 0===n?void 0:n.vaultAddress){e.next=4;break}throw new Error("Asset not in pool");case 4:return(i=new b.Transaction).add(Jo.AdminControlledPoolInstructions.removeAsset(t,a)),e.abrupt("return",[i,[]]);case 7:case"end":return e.stop()}}),e)})))),p=Object(d.a)(s,2),f=p[0],h=p[1];return Object(U.jsxs)("form",{onSubmit:f,children:[Object(U.jsx)(Pi,{poolInfo:t,label:"Token Mint Address",value:o,onChange:function(e){return i(e)},style:{marginBottom:24}}),Object(U.jsx)(Ci,{canSubmit:c,submitting:h})]})}function _i(e){var t=e.poolInfo,n=Object(a.useState)(""),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Object(a.useState)(""),s=Object(d.a)(c,2),p=s[0],f=s[1],h=Q(),j=Ie(),m=j.wallet,v=j.connected,O=on(),x=Object(d.a)(O,1)[0],g=v&&o&&x&&parseFloat(p),y=Ti("depositing to pool",Object(l.a)(u.a.mark((function e(){var n,r,a,i,c,s,l,d,f,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("Wallet is not connected");case 2:if(r=new b.PublicKey(o),a=null===(n=t.state.assets.find((function(e){return e.mint.equals(r)})))||void 0===n?void 0:n.vaultAddress){e.next=6;break}throw new Error("Asset not in pool");case 6:if(i=cn(x,r)){e.next=9;break}throw new Error("Asset not in wallet");case 9:return e.next=11,h.getAccountInfo(r);case 11:if(c=e.sent){e.next=14;break}throw new Error("Mint not found");case 14:return s=Ct(c.data).decimals,l=Math.round(parseFloat(p)*Math.pow(10,s)),d=r.equals(Le.TokenInstructions.WRAPPED_SOL_MINT)&&i.pubkey.equals(m.publicKey)?new b.Account:null,f=new b.Transaction,j=[],d?(f.add(b.SystemProgram.createAccount({fromPubkey:m.publicKey,lamports:l+204e4,newAccountPubkey:d.publicKey,programId:Le.TokenInstructions.TOKEN_PROGRAM_ID,space:165}),Le.TokenInstructions.initializeAccount({account:d.publicKey,mint:Le.TokenInstructions.WRAPPED_SOL_MINT,owner:m.publicKey}),Le.TokenInstructions.transfer({source:d.publicKey,destination:a,amount:l,owner:m.publicKey}),Le.TokenInstructions.closeAccount({source:d.publicKey,destination:i.pubkey,owner:m.publicKey})),j.push(d)):f.add(Le.TokenInstructions.transfer({source:i.pubkey,destination:a,amount:l,owner:m.publicKey})),e.abrupt("return",[f,j]);case 21:case"end":return e.stop()}}),e)}))),!0),k=Object(d.a)(y,2),w=k[0],S=k[1];return Object(U.jsxs)("form",{onSubmit:w,children:[Object(U.jsx)(Pi,{poolInfo:t,label:"Token Mint Address",value:o,onChange:function(e){return i(e)},style:{marginBottom:24}}),Object(U.jsx)(Rr.a,{addonBefore:Object(U.jsx)(U.Fragment,{children:"Quantity"}),value:p,onChange:function(e){return f(e.target.value.trim())},style:{marginBottom:24}}),Object(U.jsx)(Ci,{canSubmit:g,submitting:S})]})}function Ii(e){var t=e.poolInfo,n=Object(a.useState)(""),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Object(a.useState)(""),s=Object(d.a)(c,2),p=s[0],f=s[1],j=Q(),m=Ie(),v=m.wallet,O=m.connected,x=on(),g=Object(d.a)(x,1)[0],y=O&&o&&g&&parseFloat(p),k=Ti("withdrawing from pool",Object(l.a)(u.a.mark((function e(){var n,r,a,i,c,s,l,d,f,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}throw new Error("Wallet is not connected");case 2:if(r=new b.PublicKey(o),a=null===(n=t.state.assets.find((function(e){return e.mint.equals(r)})))||void 0===n?void 0:n.vaultAddress){e.next=6;break}throw new Error("Asset not in pool");case 6:if(i=cn(g,r)){e.next=9;break}throw new Error("Asset not in wallet");case 9:return e.next=11,j.getAccountInfo(r);case 11:if(c=e.sent){e.next=14;break}throw new Error("Mint not found");case 14:return s=Ct(c.data).decimals,l=Math.round(parseFloat(p)*Math.pow(10,s)),d=r.equals(Le.TokenInstructions.WRAPPED_SOL_MINT)&&i.pubkey.equals(v.publicKey)?new b.Account:null,f=new b.Transaction,m=[],d&&(f.add(b.SystemProgram.createAccount({fromPubkey:v.publicKey,lamports:204e4,newAccountPubkey:d.publicKey,programId:Le.TokenInstructions.TOKEN_PROGRAM_ID,space:165}),Le.TokenInstructions.initializeAccount({account:d.publicKey,mint:Le.TokenInstructions.WRAPPED_SOL_MINT,owner:v.publicKey})),m.push(d)),f.add(Jo.AdminControlledPoolInstructions.approveDelegate(t,a,v.publicKey,new h.a(l))),d?f.add(Le.TokenInstructions.transfer({source:a,destination:d.publicKey,amount:l,owner:v.publicKey}),Le.TokenInstructions.closeAccount({source:d.publicKey,destination:i.pubkey,owner:v.publicKey})):f.add(Le.TokenInstructions.transfer({source:a,destination:i.pubkey,amount:l,owner:v.publicKey})),e.abrupt("return",[f,m]);case 23:case"end":return e.stop()}}),e)})))),w=Object(d.a)(k,2),S=w[0],_=w[1];return Object(U.jsxs)("form",{onSubmit:S,children:[Object(U.jsx)(Pi,{poolInfo:t,label:"Token Mint Address",value:o,onChange:function(e){return i(e)},style:{marginBottom:24}}),Object(U.jsx)(Rr.a,{addonBefore:Object(U.jsx)(U.Fragment,{children:"Quantity"}),value:p,onChange:function(e){return f(e.target.value.trim())},style:{marginBottom:24}}),Object(U.jsx)(Ci,{canSubmit:y,submitting:_})]})}function Ai(e){var t=e.poolInfo,n=Object(a.useState)(""),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Ie().connected,s=on(),p=Object(d.a)(s,1)[0],f=c&&p&&parseFloat(o),h=Ti("changing pool fee",Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new b.Transaction).add(Jo.AdminControlledPoolInstructions.updateFee(t,Math.round(1e6*parseFloat(o)))),e.abrupt("return",[n,[]]);case 3:case"end":return e.stop()}}),e)})))),j=Object(d.a)(h,2),m=j[0],v=j[1];return Object(U.jsxs)("form",{onSubmit:m,children:[Object(U.jsx)(Rr.a,{addonBefore:Object(U.jsx)(U.Fragment,{children:"Fee Rate"}),value:o,onChange:function(e){return i(e.target.value.trim())},style:{marginBottom:24}}),Object(U.jsx)(Ci,{canSubmit:f,submitting:v})]})}function Ti(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Q(),o=Ie(),i=o.wallet,c=o.connected,s=Object(a.useState)(!1),p=Object(d.a)(s,2),b=p[0],f=p[1];function h(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function a(o){var s,l,p,h;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o.preventDefault(),!b){a.next=3;break}return a.abrupt("return");case 3:if(f(!0),a.prev=4,c&&i){a.next=7;break}throw new Error("Wallet not connected");case 7:return a.next=9,t();case 9:return s=a.sent,l=Object(d.a)(s,2),p=l[0],h=l[1],a.next=15,ut({connection:r,wallet:i,transaction:p,signers:h});case 15:n&&q(),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(4),se({message:"Error ".concat(e),description:a.t0.message,type:"error"});case 21:return a.prev=21,f(!1),a.finish(21);case 24:case"end":return a.stop()}}),a,null,[[4,18,21,24]])})))).apply(this,arguments)}return[h,b]}function Ci(e){var t=e.canSubmit,n=e.submitting,r=Ie().connected;return Object(U.jsx)(le.a,{htmlType:"submit",type:"primary",disabled:!t||n,children:r?"Submit":"Wallet not connected"})}function Pi(e){var t=e.poolInfo,n=e.label,r=e.value,a=e.onChange,o=e.style,i=Kt();return Object(U.jsxs)(Rr.a.Group,{style:o,children:[Object(U.jsx)("span",{className:"ant-input-group-addon",children:n}),Object(U.jsx)(Ke.a,{onChange:a,value:r,style:{width:"100%"},children:t.state.assets.map((function(e){return Object(U.jsx)(gi,{value:e.mint.toBase58(),children:i[e.mint.toBase58()]?Object(U.jsxs)(U.Fragment,{children:[i[e.mint.toBase58()]," (",e.mint.toBase58(),")"]}):e.mint.toBase58()},e.mint.toBase58())}))})]})}function Mi(e){var t=e.label,n=e.style,r=e.value,o=e.onChange,i=Kt(),c=Object(a.useMemo)((function(){return Object.entries(i).filter((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return n.includes(r)||a.toLowerCase().includes(r.toLowerCase())})).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return{value:n,label:Object(U.jsxs)(U.Fragment,{children:[r," (",n,")"]})}}))}),[i,r]);return Object(U.jsxs)(Rr.a.Group,{style:n,children:[Object(U.jsx)("span",{className:"ant-input-group-addon",children:t}),Object(U.jsx)(Ko.a,{options:c,value:r,onChange:function(e){return o(e)},style:{width:"100%"}})]})}var Ei,Fi,Bi=Ee.a.Text;function Ni(){var e,t=Object(Ne.i)().poolAddress,n=Z(function(e){try{return new b.PublicKey(e),!0}catch(t){return!1}}(t)?new b.PublicKey(t):null),r=Object(d.a)(n,2),o=r[0],i=r[1],c=Object(Ne.g)(),s=Object(a.useMemo)((function(){if(!o)return null;try{return{address:new b.PublicKey(t),state:Object(Jo.decodePoolState)(o.data),program:o.owner}}catch(e){return null}}),[t,o]),u=Z(null===s||void 0===s?void 0:s.state.poolTokenMint),l=Object(d.a)(u,2),p=l[0],f=l[1],h=Object(a.useMemo)((function(){return p?Ct(p.data):null}),[p]),j=Ie().wallet;return s&&h&&j?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ni.a,{title:Object(U.jsxs)(U.Fragment,{children:["Pool ",s.address.toBase58()]}),onBack:function(){return c.push("/pools")},subTitle:s.state.name}),Object(U.jsxs)(Re.a,{children:[Object(U.jsx)(ze.a,{xs:24,lg:12,children:Object(U.jsx)(ui,{poolInfo:s,mintInfo:h})}),Object(U.jsx)(ze.a,{xs:24,lg:12,children:Object(U.jsx)(pi,{poolInfo:s,mintInfo:h})}),Object(U.jsx)(ze.a,{xs:24,children:Object(U.jsx)(hi,{poolInfo:s})}),j.connected&&(null===(e=s.state.adminKey)||void 0===e?void 0:e.equals(j.publicKey))&&Object(Jo.isAdminControlledPool)(s)?Object(U.jsx)(ze.a,{xs:24,children:Object(U.jsx)(yi,{poolInfo:s})}):null]})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ni.a,{title:Object(U.jsxs)(U.Fragment,{children:["Pool ",t]}),onBack:function(){return c.push("/pools")}}),Object(U.jsx)(wn,{children:i&&f?Object(U.jsx)(Bi,{children:"Invalid pool"}):Object(U.jsx)(Me.a,{})})]})}var Ki=Ee.a.Title,Ri=Ce.c.div(Ei||(Ei=Object(Te.a)(["\n  max-width: 700px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]))),zi=Ce.c.form(Fi||(Fi=Object(Te.a)(["\n  display: flex;\n  margin-top: 16px;\n  margin-bottom: 48px;\n"])));function Di(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(Ne.g)();return Object(U.jsx)(Ri,{children:Object(U.jsxs)(wn,{children:[Object(U.jsx)(Ki,{level:3,children:"Pools"}),Object(U.jsxs)(zi,{onSubmit:function(e){e.preventDefault(),o.push("/pools/".concat(n))},children:[Object(U.jsx)(Rr.a,{value:n,onChange:function(e){return r(e.target.value.trim())},placeholder:"Pool address"}),Object(U.jsx)(le.a,{type:"primary",htmlType:"submit",children:"Go"})]}),Object(U.jsx)(ce,{to:"/pools/new",children:"Create new pool"})]})})}function Li(){return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(ae.a,{basename:"/",children:Object(U.jsx)(Eo,{children:Object(U.jsxs)(Ne.d,{children:[Object(U.jsx)(Ne.b,{exact:!0,path:"/",children:Object(U.jsx)(Ne.a,{to:Yt()})}),Object(U.jsx)(Ne.b,{exact:!0,path:"/market/:marketAddress",children:Object(U.jsx)(Ia,{})}),Object(U.jsx)(Ne.b,{exact:!0,path:"/orders",component:Ka}),Object(U.jsx)(Ne.b,{exact:!0,path:"/balances",component:Da}),Object(U.jsx)(Ne.b,{exact:!0,path:"/convert",component:Za}),Object(U.jsx)(Ne.b,{exact:!0,path:"/list-new-market",component:qo}),Object(U.jsx)(Ne.b,{exact:!0,path:"/pools",children:Object(U.jsx)(Di,{})}),Object(U.jsx)(Ne.b,{exact:!0,path:"/pools/new",children:Object(U.jsx)(ei,{})}),Object(U.jsx)(Ne.b,{exact:!0,path:"/pools/:poolAddress",children:Object(U.jsx)(Ni,{})})]})})})})}function qi(){return Object(U.jsxs)(a.Suspense,{fallback:function(){return Object(U.jsx)(Me.a,{size:"large"})},children:[Object(U.jsx)(Pe,{}),Object(U.jsx)(Be,{children:Object(U.jsx)(G,{children:Object(U.jsx)(er,{children:Object(U.jsx)(_e,{children:Object(U.jsx)(Ar,{children:Object(U.jsx)(a.Suspense,{fallback:function(){return Object(U.jsx)(Me.a,{size:"large"})},children:Object(U.jsx)(Li,{})})})})})})})]})}var Wi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ui(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(U.jsx)(o.a.StrictMode,{children:Object(U.jsx)(qi,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Wi?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ui(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ui(t,e)}))}}()}},[[714,1,2]]]);
//# sourceMappingURL=main.8a0a9cab.chunk.js.map